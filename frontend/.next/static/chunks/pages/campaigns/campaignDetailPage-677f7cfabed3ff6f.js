(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{508:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/campaignDetailPage",function(){return a(8402)}])},1249:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(4232),n=a(9099),s=a(6984);function l(e){let{children:t}=e,a=(0,n.useRouter)();return(0,r.useEffect)(()=>{!function(){let e=localStorage.getItem("jwt");if(!e)return null;try{let t=(0,s.s)(e);if(t.exp&&Date.now()/1e3>t.exp)return localStorage.removeItem("jwt"),localStorage.removeItem("user"),null;return t}catch(e){return null}}()&&(localStorage.removeItem("jwt"),localStorage.removeItem("user"),a.replace("/"))},[a]),t}},8402:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(7876),n=a(4232),s=a(9099),l=a(1040),i=a(9161),c=a(1249);function u(){let{id:e}=(0,s.useRouter)().query,[t,a]=(0,n.useState)(null),[u,o]=(0,n.useState)(""),[d,h]=(0,n.useState)(!0),[m,g]=(0,n.useState)("");(0,n.useEffect)(()=>{e&&(async()=>{h(!0);try{let t=localStorage.getItem("jwt"),r=await l.A.get("".concat("http://localhost:3002","/campaigns/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});a(r.data),g("")}catch(e){g("Failed to fetch campaign")}h(!1)})()},[e]);let f=async()=>{h(!0),g("");try{let e=await l.A.post("".concat("http://localhost:5002","/ai/performance-summary"),{stats:{sent:t.sent,failed:t.failed,audienceSize:t.audienceSize,status:t.status}});o(e.data.summary)}catch(e){g("Failed to get summary")}h(!1)};return d?(0,r.jsx)(i.A,{children:(0,r.jsx)("div",{role:"status",children:"Loading..."})}):m?(0,r.jsx)(i.A,{children:(0,r.jsx)("div",{role:"alert",children:m})}):t?(0,r.jsx)(i.A,{children:(0,r.jsx)(c.A,{children:(0,r.jsxs)("section",{"aria-label":"Campaign Detail",children:[(0,r.jsx)("h2",{tabIndex:0,children:t.name}),(0,r.jsxs)("div",{children:["Status: ",t.status]}),(0,r.jsxs)("div",{children:["Audience: ",t.audienceSize]}),(0,r.jsxs)("div",{children:["Sent: ",t.sent]}),(0,r.jsxs)("div",{children:["Failed: ",t.failed]}),(0,r.jsxs)("div",{children:["Message: ",t.message]}),(0,r.jsx)("button",{type:"button",onClick:f,"aria-label":"Show AI-generated performance summary",children:"Show AI Summary"}),u&&(0,r.jsx)("div",{style:{marginTop:8,background:"#f6f6f6",padding:8},"aria-live":"polite",children:u})]})})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[719,636,593,792],()=>t(508)),_N_E=e.O()}]);