"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{8392:(e,l,t)=>{t.d(l,{Ie4:()=>$,r6s:()=>ti,tNl:()=>j});var o=t(4232),a=t(7876),r=t(1777),n=t(8450),i=t(8841),s=t(4609),u=(0,o.createContext)({}),d=e=>(0,a.jsx)("button",{type:"button","data-testid":e.testID,disabled:e.disabled&&!e.disabledTranslation,className:e.className,title:e.disabledTranslation&&e.disabled?e.disabledTranslation.title:e.title,onClick:l=>e.handleOnClick(l),children:e.disabledTranslation&&e.disabled?e.disabledTranslation.label:e.label}),c=(0,o.forwardRef)((e,l)=>(0,a.jsx)("span",{"data-testid":e.testID,ref:l,className:e.className,title:e.title,children:e.label})),p="------",h=[{name:"=",value:"=",label:"="},{name:"!=",value:"!=",label:"!="},{name:"<",value:"<",label:"<"},{name:">",value:">",label:">"},{name:"<=",value:"<=",label:"<="},{name:">=",value:">=",label:">="},{name:"contains",value:"contains",label:"contains"},{name:"beginsWith",value:"beginsWith",label:"begins with"},{name:"endsWith",value:"endsWith",label:"ends with"},{name:"doesNotContain",value:"doesNotContain",label:"does not contain"},{name:"doesNotBeginWith",value:"doesNotBeginWith",label:"does not begin with"},{name:"doesNotEndWith",value:"doesNotEndWith",label:"does not end with"},{name:"null",value:"null",label:"is null"},{name:"notNull",value:"notNull",label:"is not null"},{name:"in",value:"in",label:"in"},{name:"notIn",value:"notIn",label:"not in"},{name:"between",value:"between",label:"between"},{name:"notBetween",value:"notBetween",label:"not between"}],b=[{name:"and",value:"and",label:"AND"},{name:"or",value:"or",label:"OR"}];[...b];var m={queryBuilder:"queryBuilder",ruleGroup:"ruleGroup",header:"ruleGroup-header",body:"ruleGroup-body",combinators:"ruleGroup-combinators",addRule:"ruleGroup-addRule",addGroup:"ruleGroup-addGroup",cloneRule:"rule-cloneRule",cloneGroup:"ruleGroup-cloneGroup",removeGroup:"ruleGroup-remove",notToggle:"ruleGroup-notToggle",rule:"rule",fields:"rule-fields",operators:"rule-operators",value:"rule-value",removeRule:"rule-remove",betweenRules:"betweenRules",valid:"queryBuilder-valid",invalid:"queryBuilder-invalid",shiftActions:"shiftActions",dndDragging:"dndDragging",dndOver:"dndOver",dndCopy:"dndCopy",dndGroup:"dndGroup",dragHandle:"queryBuilder-dragHandle",disabled:"queryBuilder-disabled",lockRule:"rule-lock",lockGroup:"ruleGroup-lock",valueSource:"rule-valueSource",valueListItem:"rule-value-list-item"},f={queryBuilder:"",ruleGroup:"",header:"",body:"",combinators:"",addRule:"",addGroup:"",cloneRule:"",cloneGroup:"",removeGroup:"",notToggle:"",rule:"",fields:"",operators:"",value:"",removeRule:"",shiftActions:"",dragHandle:"",lockRule:"",lockGroup:"",valueSource:"",actionElement:"",valueSelector:"",betweenRules:"",valid:"",invalid:"",dndDragging:"",dndOver:"",dndGroup:"",dndCopy:"",disabled:"",valueListItem:"",branches:""},v={rule:"rule",ruleGroup:"rule-group",inlineCombinator:"inline-combinator",addGroup:"add-group",removeGroup:"remove-group",cloneGroup:"clone-group",cloneRule:"clone-rule",addRule:"add-rule",removeRule:"remove-rule",combinators:"combinators",fields:"fields",operators:"operators",valueEditor:"value-editor",notToggle:"not-toggle",shiftActions:"shift-actions",dragHandle:"drag-handle",lockRule:"lock-rule",lockGroup:"lock-group",valueSourceSelector:"value-source-selector"},g={parentPathDisabled:"action aborted: parent path disabled",pathDisabled:"action aborted: path is disabled",onAddRuleFalse:"onAddRule callback returned false",onAddGroupFalse:"onAddGroup callback returned false",onGroupRuleFalse:"onGroupRule callback returned false",onGroupGroupFalse:"onGroupGroup callback returned false",onMoveRuleFalse:"onMoveRule callback returned false",onMoveGroupFalse:"onMoveGroup callback returned false",onRemoveFalse:"onRemove callback returned false",add:"rule or group added",remove:"rule or group removed",update:"rule or group updated",move:"rule or group moved",group:"rule or group grouped with another"},G=[];function y(){let e,l,t=0,o="",a=arguments.length;for(;t<a;t++)(e=t<0||arguments.length<=t?void 0:arguments[t])&&(l=function e(l){let t,o,a="";if("string"==typeof l||"number"==typeof l)a+=l;else if("object"==typeof l)if(Array.isArray(l)){let r=l.length;for(t=0;t<r;t++)l[t]&&(o=e(l[t]))&&(a&&(a+=" "),a+=o)}else for(o in l)l[o]&&(a&&(a+=" "),a+=o);return a}(e))&&(o&&(o+=" "),o+=l);return o}var R={errorInvalidIndependentCombinatorsProp:"QueryBuilder was rendered with a truthy independentCombinators prop. This prop is deprecated and unnecessary. Furthermore, the initial query/defaultQuery prop was of type RuleGroupType instead of type RuleGroupIC. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",errorUnnecessaryIndependentCombinatorsProp:"QueryBuilder was rendered with the deprecated and unnecessary independentCombinators prop. To use independent combinators, make sure the query/defaultQuery prop is of type RuleGroupIC when the component mounts. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",errorDeprecatedRuleGroupProps:"A custom RuleGroup component has rendered a standard RuleGroup component with deprecated props. The combinator, not, and rules props should not be used. Instead, the full group object should be passed as the ruleGroup prop.",errorDeprecatedRuleProps:"A custom RuleGroup component has rendered a standard Rule component with deprecated props. The field, operator, value, and valueSource props should not be used. Instead, the full rule object should be passed as the rule prop.",errorBothQueryDefaultQuery:"QueryBuilder was rendered with both query and defaultQuery props. QueryBuilder must be either controlled or uncontrolled (specify either the query prop, or the defaultQuery prop, but not both). Decide between using a controlled or uncontrolled query builder and remove one of these props. More info: https://reactjs.org/link/controlled-components",errorUncontrolledToControlled:"QueryBuilder is changing from an uncontrolled component to be controlled. This is likely caused by the query changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",errorControlledToUncontrolled:"QueryBuilder is changing from a controlled component to be uncontrolled. This is likely caused by the query changing from defined to undefined, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",errorEnabledDndWithoutReactDnD:"QueryBuilder was rendered with the enableDragAndDrop prop set to true, but either react-dnd was not detected or one of react-dnd-html5-backend or react-dnd-touch-backend was not detected. To enable drag-and-drop functionality, install react-dnd and one of the backend packages and wrap QueryBuilder in QueryBuilderDnD from @react-querybuilder/dnd."},$=o.createContext(null),A=(0,n.Z0)({name:"queries",initialState:{},reducers:{setQueryState:(e,l)=>{let{payload:{qbId:t,query:o}}=l;e[t]=o}},selectors:{getQuerySelectorById:(e,l)=>e[l]}}),w={[R.errorInvalidIndependentCombinatorsProp]:!1,[R.errorUnnecessaryIndependentCombinatorsProp]:!1,[R.errorDeprecatedRuleGroupProps]:!1,[R.errorDeprecatedRuleProps]:!1,[R.errorBothQueryDefaultQuery]:!1,[R.errorUncontrolledToControlled]:!1,[R.errorControlledToUncontrolled]:!1,[R.errorEnabledDndWithoutReactDnD]:!1},k=(0,n.Z0)({name:"warnings",initialState:w,reducers:{rqbWarn:(e,l)=>{let{payload:t}=l;e[t]||(console.error(t),e[t]=!0)}}}),D=e=>{let{payload:l,onQueryChange:t}=e;return e=>{e(A.actions.setQueryState(l)),"function"==typeof t&&t(l.query)}},S=(0,r.iI)($),N=(0,r.Nk)($),{rqbWarn:C}=k.actions,x={queries:A.getInitialState(),warnings:k.getInitialState()},j={reducer:{queries:A.reducer,warnings:k.reducer},preloadedState:x,middleware:e=>e({serializableCheck:{ignoredActions:[A.actions.setQueryState.type],ignoredPaths:[/^queries\b.*\.rules\.\d+\.value$/]}})},L=(e,l)=>{},E=Symbol.for("react.memo_cache_sentinel");function M(e){return o.useMemo(()=>{let l=Array.from({length:e});for(let t=0;t<e;t++)l[t]=E;return l[E]=!0,l},[])}var O=e=>{let l,t=M(2);return t[0]!==e?(l=(l,t)=>{l?.preventDefault(),l?.stopPropagation(),e(l,t)},t[0]=e,t[1]=l):l=t[1],l},T=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return"string"==typeof e?e.split(`\\${l}`).map(e=>e.split(l)).reduce((e,t,o)=>0===o?t:[...e.slice(0,-1),`${e.at(-1)}${l}${t[0]}`,...t.slice(1)],[]):[]},I=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map(e=>`${e??""}`.replaceAll(l[0],`\\${l[0]}`)).join(l)},q=e=>"string"==typeof e?e.trim():e,H=function(e){let{retainEmptyStrings:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)?e.map(e=>q(e)):"string"==typeof e?T(e,",").filter(l?()=>!0:e=>!/^\s*$/.test(e)).map(e=>e.trim()):"number"==typeof e?[e]:[]},U=new RegExp(i.BN.source.replace(/^\^/,String.raw`^\s*`).replace(/\$$/,String.raw`\s*$`)),B=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,Q=e=>null==e||""===e,W=e=>B(e)&&Array.isArray(e.rules),P=e=>W(e)&&"string"==typeof e.combinator,F=e=>W(e)&&void 0===e.combinator,V=(e,l)=>"string"==typeof e&&e.toLowerCase()===l,_=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=null[l];return e.rules.includes(t)?produce(e,e=>{let o=0;for(;o<e.rules.length-2;){if(V(e.rules[o+1],t)){o+=2;continue}let a=e.rules.findIndex((e,l)=>l>o&&"string"==typeof e&&e.toLowerCase()===t);if(-1===a){e.rules.splice(o,e.rules.length,_({rules:e.rules.slice(o)},l+1));break}e.rules.splice(o,a-o,_({rules:e.rules.slice(o,a)},l+1))}}):l<null.length-2?_(e,l+1):e},z=e=>{if(P(e))return e;let l=_(e),t=l.rules.map(e=>"string"!=typeof e&&W(e)?z(e):e),o=t.length<2?"and":t[1],a=t.filter(e=>"string"!=typeof e);return{...l,combinator:o,rules:a}},K=e=>B(e)&&"name"in e&&"string"==typeof e.name,J=e=>B(e)&&"value"in e&&"string"==typeof e.value;function Z(e,l){return(0,s.jM)(e=>{let t={},o=!!l;if(K(e)&&!J(e)?(t.value=e.name,o=!0):!K(e)&&J(e)&&(t.name=e.value,o=!0),o)return Object.assign({},l,e,t)})(e)}function X(e,l){return Array.isArray(e)?(0,s.jM)(e=>{if(eo(e))for(let t of e)for(let[e,o]of t.options.entries())t.options[e]=Z(o,l);else for(let[t,o]of e.entries())e[t]=Z(o,l)})(e):[]}function Y(e,l){return Object.fromEntries(Object.entries(e).map(e=>{let[t,o]=e;return[t,Z(o,l)]}))}var ee=e=>{let l=new Set,t=[];for(let o of e)l.has(o.value??o.name)||(l.add(o.value??o.name),t.push(o));return e.length===t.length?e:t},el=e=>Array.isArray(e)&&e.length>0&&B(e[0])&&"options"in e[0]&&Array.isArray(e[0].options),et=e=>{let l=!1;if(Array.isArray(e))for(let t of e)if(!(K(t)||J(t)))return!1;else l=!0;return l},eo=function(e){let{allowEmpty:l=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=!1;if(Array.isArray(e))for(let o of e)if(!(B(o)&&"options"in o&&(et(o.options)||l&&Array.isArray(o.options)&&0===o.options.length)))return!1;else t=!0;return t},ea=(e,l)=>(eo(e,{allowEmpty:!0})?e.flatMap(e=>e.options):e).find(e=>e.value===l||e.name===l),er=e=>{if(!Array.isArray(e)||0===e.length)return null;if(eo(e,{allowEmpty:!0})){for(let l of e)if(l.options.length>0)return l.options[0].value??l.options[0].name;return null}return e[0].value??e[0].name},en=e=>{let l=new Set,t=new Set,o=[];for(let a of e)if(!l.has(a.label)){l.add(a.label);let e=[];for(let l of a.options)t.has(l.value??l.name)||(t.add(l.value??l.name),e.push(Z(l)));o.push({...a,options:e})}return o},ei=e=>eo(e)?en(e):ee(e.map(e=>Z(e))),es=(e,l,t)=>{let o=Z(e),a=Z(t);return o.value!==a.value&&("string"==typeof o.comparator?o[o.comparator]===a[o.comparator]:o.comparator?.(a,l)??!1)},eu=(e,l,t)=>{if(!e.comparator){let t=l=>(l.value??l.name)!==(e.value??e.name);return eo(l)?l.map(e=>({...e,options:e.options.filter(e=>t(e))})):l.filter(e=>t(e))}return eo(l)?l.map(l=>({...l,options:l.options.filter(l=>es(e,t,l))})).filter(e=>e.options.length>0):l.filter(l=>es(e,t,l))},ed=function(e){let{parseNumbers:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l||"bigint"==typeof e||"number"==typeof e)return e;if("native"===l)return parseFloat(e);let t=(0,i.Xb)(e,{allowTrailingInvalid:"enhanced"===l,romanNumerals:!1,round:!1});return isNaN(t)?e:t},ec=e=>{let{parseNumbers:l,inputType:t}=e;if("string"==typeof l){let[e,o]=l.split("-");return"limited"===o?"number"===t&&e:e}return!!l&&"strict"},ep=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},eh={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notin:"$nin",notIn:"$nin"},eb={"=":"equals","!=":"not","<":"lt","<=":"lte",">":"gt",">=":"gte",in:"in",notin:"notIn"},em={and:"&&",or:"||"},ef=e=>"string"==typeof e&&e.length>0||"number"==typeof e&&!isNaN(e)||"string"!=typeof e&&"number"!=typeof e,ev=(e,l)=>!!l&&("number"==typeof e||"bigint"==typeof e||"string"==typeof e&&U.test(e)),eg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["",""];return Array.isArray(e)?e:"string"==typeof e?[e,e]:e??["",""]},eG=(e,l)=>{let{quoteFieldNamesWith:t,fieldIdentifierSeparator:o}=l,[a,r]=eg(t);return"string"==typeof o&&o.length>0?I(T(e,o).map(e=>`${a}${e}${r}`),o):`${a}${e}${r}`},ey=["S","V","O"],eR=e=>{let l=[],t=new Set(ey);for(let o of e.toUpperCase())if(t.has(o)&&(l.push(o),t.delete(o),0===t.size))break;for(let e of ey)t.has(e)&&l.push(e);return l},e$={groupPrefix:"",groupPrefix_not_xor:"either zero or more than one of",groupPrefix_xor:"exactly one of",groupSuffix:"is true",groupSuffix_not:"is not true"},eA=(e,l,t)=>l.startsWith(e)&&t.every(e=>l.includes(`_${e}`)&&l.match(/_/g)?.length===t.length),ew=function(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return 0===t.length?l[e]??e$[e]??"":Object.entries(l).find(l=>{let[o]=l;return eA(e,o,t)})?.[1]??Object.entries(e$).find(l=>{let[o]=l;return eA(e,o,t)})?.[1]??e$[e]??""},ek=e=>e.startsWith("not")||e.startsWith("doesnot"),eD=(e,l)=>"string"==typeof e&&l?e.replaceAll('"','\\"'):e,eS=function(e){let{field:l,operator:t,value:o,valueSource:a}=e,{escapeQuotes:r,parseNumbers:n,preserveValueOrder:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="field"===a,u=("="===t?"==":t).toLowerCase(),d="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||ev(o,n);switch(u){case"<":case"<=":case"==":case"!=":case">":case">=":return`${l} ${u} ${s||d?q(o):`"${eD(o,r)}"`}`;case"contains":case"doesnotcontain":{let e=ek(u)?"!":"";return`${e}${l}.contains(${s?q(o):`"${eD(o,r)}"`})`}case"beginswith":case"doesnotbeginwith":{let e=ek(u)?"!":"";return`${e}${l}.startsWith(${s?q(o):`"${eD(o,r)}"`})`}case"endswith":case"doesnotendwith":{let e=ek(u)?"!":"";return`${e}${l}.endsWith(${s?q(o):`"${eD(o,r)}"`})`}case"null":return`${l} == null`;case"notnull":return`${l} != null`;case"in":case"notin":{let[e,t]=ek(u)?["!(",")"]:["",""],a=H(o);return`${e}${l} in [${a.map(e=>s||ev(e,n)?`${q(e)}`:`"${eD(e,r)}"`).join(", ")}]${t}`}case"between":case"notbetween":{let e=H(o);if(!(e.length>=2)||Q(e[0])||Q(e[1]))break;{let[t,o]=e,a=ev(t,!0)?ed(t,{parseNumbers:!0}):NaN,n=ev(o,!0)?ed(o,{parseNumbers:!0}):NaN,d=isNaN(a)?s?`${t}`:`"${eD(t,r)}"`:a,c=isNaN(n)?s?`${o}`:`"${eD(o,r)}"`:n;return!i&&d===a&&c===n&&n<a&&(c=a,d=n),"between"===u?`(${l} >= ${d} && ${l} <= ${c})`:`(${l} < ${d} || ${l} > ${c})`}}}return""},eN=function(e){let{field:l,operator:t,value:o,valueSource:a}=e,{parseNumbers:r,preserveValueOrder:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="field"===a;if("="===t&&!i)return{[l]:ev(o,r)?ed(o,{parseNumbers:"strict"}):o};let s=t.toLowerCase();switch(s){case"<":case"<=":case"=":case"!=":case">":case">=":{let e=eh[s];return i?{$expr:{[e]:[`$${l}`,`$${o}`]}}:{[l]:{[e]:ev(o,r)?ed(o,{parseNumbers:"strict"}):o}}}case"contains":return i?{$where:`this.${l}.includes(this.${o})`}:{[l]:{$regex:o}};case"beginswith":return i?{$where:`this.${l}.startsWith(this.${o})`}:{[l]:{$regex:`^${o}`}};case"endswith":return i?{$where:`this.${l}.endsWith(this.${o})`}:{[l]:{$regex:`${o}$`}};case"doesnotcontain":return i?{$where:`!this.${l}.includes(this.${o})`}:{[l]:{$not:{$regex:o}}};case"doesnotbeginwith":return i?{$where:`!this.${l}.startsWith(this.${o})`}:{[l]:{$not:{$regex:`^${o}`}}};case"doesnotendwith":return i?{$where:`!this.${l}.endsWith(this.${o})`}:{[l]:{$not:{$regex:`${o}$`}}};case"null":return{[l]:null};case"notnull":return{[l]:{$ne:null}};case"in":case"notin":{let e=H(o);return i?{$where:`${"notin"===s?"!":""}[${e.map(e=>`this.${e}`).join(",")}].includes(this.${l})`}:{[l]:{[eh[s]]:e.map(e=>ev(e,r)?ed(e,{parseNumbers:"strict"}):e)}}}case"between":case"notbetween":{let e=H(o);if(e.length>=2&&ef(e[0])&&ef(e[1])){let[t,o]=e,a=ev(t,!0)?ed(t,{parseNumbers:"strict"}):NaN,r=ev(o,!0)?ed(o,{parseNumbers:"strict"}):NaN,u=i||isNaN(a)?t:a,d=i||isNaN(r)?o:r;if(!n&&u===a&&d===r&&r<a&&(d=a,u=r),"between"===s)return i?{$and:[{$expr:{$gte:[`$${l}`,`$${u}`]}},{$expr:{$lte:[`$${l}`,`$${d}`]}}]}:{[l]:{$gte:u,$lte:d}};return i?{$or:[{$expr:{$lt:[`$${l}`,`$${u}`]}},{$expr:{$gt:[`$${l}`,`$${d}`]}}]}:{$or:[{[l]:{$lt:u}},{[l]:{$gt:d}}]}}}}return""},eC=(e,l)=>{let t=eN(e,l);return t?JSON.stringify(t):""},ex=e=>e.startsWith("not")||e.startsWith("doesnot"),ej=(e,l)=>l?`!(${e})`:`${e}`,eL=(e,l)=>"string"==typeof e&&l?e.replaceAll("'","\\'"):e,eE=function(e){let{field:l,operator:t,value:o,valueSource:a}=e,{escapeQuotes:r,parseNumbers:n,preserveValueOrder:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="field"===a,u=("="===t?"==":t).toLowerCase(),d="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||ev(o,n);switch(u){case"<":case"<=":case"==":case"!=":case">":case">=":return`${l} ${u} ${s||d?q(o):`'${eL(o,r)}'`}`;case"contains":case"doesnotcontain":return ej(`${l} matches ${s||d?q(o):`'${eL(o,r)}'`}`,ex(u));case"beginswith":case"doesnotbeginwith":{let e=s?`'^'.concat(${q(o)})`:`'${"string"==typeof o&&!o.startsWith("^")||d?"^":""}${eL(o,r)}'`;return ej(`${l} matches ${e}`,ex(u))}case"endswith":case"doesnotendwith":{let e=s?`${q(o)}.concat('$')`:`'${eL(o,r)}${"string"==typeof o&&!o.endsWith("$")||d?"$":""}'`;return ej(`${l} matches ${e}`,ex(u))}case"null":return`${l} == null`;case"notnull":return`${l} != null`;case"in":case"notin":{let e=ex(u)?"!":"",t=H(o);return t.length>0?`${e}(${t.map(e=>`${l} == ${s||ev(e,n)?`${q(e)}`:`'${eL(e,r)}'`}`).join(" or ")})`:""}case"between":case"notbetween":{let e=H(o);if(!(e.length>=2)||Q(e[0])||Q(e[1]))break;{let[t,o]=e,a=ev(t,!0)?ed(t,{parseNumbers:!0}):NaN,n=ev(o,!0)?ed(o,{parseNumbers:!0}):NaN,d=isNaN(a)?s?`${t}`:`'${eL(t,r)}'`:a,c=isNaN(n)?s?`${o}`:`'${eL(o,r)}'`:n;return!i&&d===a&&c===n&&n<a&&(c=a,d=n),"between"===u?`(${l} >= ${d} and ${l} <= ${c})`:`(${l} < ${d} or ${l} > ${c})`}}}return""},eM=(e,l,t)=>t&&"string"==typeof e?e.replaceAll(`${l}`,`${l}${l}`):e,eO=function(e){let{operator:l,value:t,valueSource:o}=e,{escapeQuotes:a,parseNumbers:r,preserveValueOrder:n,quoteFieldNamesWith:i,quoteValuesWith:s,concatOperator:u="||",fieldIdentifierSeparator:d,wrapValueWith:c=["",""],translations:p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h="field"===o,b=l.toLowerCase(),m=s||"'",f=e=>`${c[0]}${m}${e}${m}${c[1]}`,v=e=>eM(e,m,a),g=e=>f(v(e)),G=e=>eG(e,{quoteFieldNamesWith:i,fieldIdentifierSeparator:d}),y=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return"CONCAT"===u.toUpperCase()?`CONCAT(${l.join(", ")})`:l.join(` ${u} `)};switch(b){case"null":case"notnull":return"";case"in":case"notin":{let e=H(t);if(e.length>0)return`(${e.map(e=>h?G(e):ev(e,r)?`${q(e)}`:`${g(e)}`).join(", ")})`;return""}case"between":case"notbetween":{let e=H(t,{retainEmptyStrings:!0});if(e.length<2||!ef(e[0])||!ef(e[1]))return"";let[l,o]=e,a=ev(l,r)?ed(l,{parseNumbers:"strict"}):NaN,i=ev(o,r)?ed(o,{parseNumbers:"strict"}):NaN,s=isNaN(a)?h?`${l}`:l:a,u=isNaN(i)?h?`${o}`:o:i,d=[s,u];return!n&&s===a&&u===i&&i<a&&(d[0]=i,d[1]=a),(h?d.map(e=>G(e)):d.every(e=>ev(e,r))?d.map(e=>ed(e,{parseNumbers:"strict"})):d.map(e=>g(e))).join(` ${p?.and??"and"} `)}case"contains":case"doesnotcontain":return h?y(f("%"),G(t),f("%")):f(`%${v(t)}%`);case"beginswith":case"doesnotbeginwith":return h?y(G(t),f("%")):f(`${v(t)}%`);case"endswith":case"doesnotendwith":return h?y(f("%"),G(t)):f(`%${v(t)}`)}return"boolean"==typeof t?t?"TRUE":"FALSE":h?G(t):ev(t,r)?`${q(t)}`:`${g(t)}`},eT=e=>B(e)&&"boolean"==typeof e.valid,eI=(e,l,t)=>{if("boolean"==typeof l)return l;if(eT(l))return l.valid;if("function"==typeof t&&!W(e)){let l=t(e);if("boolean"==typeof l)return l;if(eT(l))return l.valid}return!0},eq=function(e){let{preserveValueOrder:l,context:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{columns:o,drizzleOperators:a}=t;if(!o||!a)return;let{between:r,eq:n,gt:i,gte:s,inArray:u,isNotNull:d,isNull:c,like:p,lt:h,lte:b,ne:m,notBetween:f,notInArray:v,notLike:g,sql:G}=a,{field:y,operator:R,value:$,valueSource:A}=e,w=o[y],k=R.toLowerCase(),D="field"===A,S=e=>D?o[e]:e;if(w)switch(k){case"=":return n(w,S($));case"!=":return m(w,S($));case">":return i(w,S($));case"<":return h(w,S($));case">=":return s(w,S($));case"<=":return b(w,S($));case"beginswith":case"doesnotbeginwith":return("doesnotbeginwith"===k?g:p)(w,D?G`${S($)} || '%'`:`${$}%`);case"contains":case"doesnotcontain":return("doesnotcontain"===k?g:p)(w,D?G`'%' || ${S($)} || '%'`:`%${$}%`);case"endswith":case"doesnotendwith":return("doesnotendwith"===k?g:p)(w,D?G`'%' || ${S($)}`:`%${$}`);case"null":return c(w);case"notnull":return d(w);case"in":case"notin":{let e=H($).map(e=>S(e));return"notin"===k?v(w,e):u(w,e)}case"between":case"notbetween":{let e=H($);if(e.length>=2&&ef(e[0])&&ef(e[1])){let[t,o]=e;if(!D&&ev(t,!0)&&ev(o,!0)){let e=ed(t,{parseNumbers:!0}),a=ed(o,{parseNumbers:!0});!l&&a<e?(o=e,t=a):(t=e,o=a)}else D&&(t=S(t),o=S(o));return"notbetween"===k?f(w,t,o):r(w,t,o)}return}default:return}},eH=e=>e.startsWith("{")&&e.endsWith("}"),eU={$and:[{$expr:!0}]},eB={},eQ={"<":"lt","<=":"lte",">":"gt",">=":"gte"},eW=(e,l)=>e.startsWith("not")||e.startsWith("doesnot")?{bool:{must_not:l}}:l,eP=e=>e?.replace(/('|\\)/g,"\\$1"),eF={beginswith:"startsWith",doesnotbeginwith:"startsWith",doesnotcontain:"contains",doesnotendwith:"endsWith",endswith:"endsWith"},eV=(e,l,t)=>{let o=`doc['${e}'].value.${eF[l]??l}(doc['${t}'].value)`;return l.startsWith("d")?`!${o}`:o},e_=(e,l)=>"boolean"==typeof e?e:ev(e,l)?ed(e,{parseNumbers:l}):e,ez=e=>e.startsWith("not")||e.startsWith("doesnot"),eK=(e,l)=>`"${"string"!=typeof e||!l?e:e.replaceAll('"','\\"')}"`,eJ=(e,l)=>l?`$not(${e})`:`${e}`,eZ=e=>`${e}`.replaceAll(/[/$()*+.?[\\\]^{|}]/g,String.raw`\$&`).replaceAll("-",String.raw`\x2d`),eX=e=>e.replace(/^(=)$/,"$1=").replace(/^notnull$/i,"!=").replace(/^null$/i,"=="),eY=(e,l)=>e.startsWith("not")||e.startsWith("doesnot")?{"!":l}:l,e1=(e,l)=>l?`(!${e})`:`${e}`,e0=e=>`${q(e)}`.replaceAll(/[()&|=<>~*\\/]/g,e=>`\\${e.codePointAt(0).toString(16)}`),e2=(e,l,t)=>t&&"string"==typeof e?e.replaceAll(`${l}`,`${l}${l}`):e,e3=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{escapeQuotes:t,fields:o,parseNumbers:a,quoteFieldNamesWith:r,quoteValuesWith:n,fieldIdentifierSeparator:i,translations:s}=l,u="field"===e.valueSource,d=e.operator.toLowerCase(),c=n||"'",p=e=>`${c}${e}${c}`,h=e=>e2(e,c,t),b=e=>p(h(e)),m=e=>eG(e,{quoteFieldNamesWith:r,fieldIdentifierSeparator:i}),f=s??{},v=f.or??"or",g=f.true??"true",G=f.false??"false";switch(d){case"null":case"notnull":return"";case"between":case"notbetween":{if(!u)return eO(e,l);let t=H(e.value,{retainEmptyStrings:!0}).slice(0,2).map(e=>m(ea(o??[],e)?.label??e));if(t.length<2||!ef(t[0])||!ef(t[1]))return"";return eO({...e,value:t},l)}case"in":case"notin":{let l=H(e.value);if(0===l.length)return"";let t=l.map(e=>u?m(ea(o??[],e)?.label??e):ev(e,a)?`${q(e)}`:`${b(e)}`);return`${t.slice(0,-1).join(", ")}${t.length>2?",":""} ${v} ${t.at(-1)}`}}return"boolean"==typeof e.value?e.value?g:G:u?m(ea(o??[],e.value)?.label??e.value):ev(e.value,a)?`${q(e.value)}`:`${b(e.value)}`},e4={"=":["is","is the same as the value in"],"!=":["is not","is not the same as the value in"],"<":["is less than","is less than the value in"],">":["is greater than","is greater than the value in"],"<=":["is less than or equal to","is less than or equal to the value in"],">=":["is greater than or equal to","is greater than or equal to the value in"],contains:["contains","contains the value in"],beginswith:["starts with","starts with the value in"],endswith:["ends with","ends with the value in"],doesnotcontain:["does not contain","does not contain the value in"],doesnotbeginwith:["does not start with","does not start with the value in"],doesnotendwith:["does not end with","does not end with the value in"],null:"is null",notnull:"is not null",in:["is one of the values","is the same as a value in"],notin:["is not one of the values","is not the same as any value in"],between:["is between","is between the values in"],notbetween:["is not between","is not between the values in"]},e6=()=>[],e5=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{valueSource:t="value"}=e,{getOperators:o=e6,operatorMap:a=e4}=l,r=new Map(Object.entries(e4));for(let[e,l]of Object.entries(a))r.set(e.toLowerCase(),l);let n=Object.fromEntries(r),{value:i,label:s}=ea(X(o(e.field,{fieldData:l.fieldData??{name:e.field,value:e.field,label:e.field}})??[]),e.operator)??{name:e.operator,value:e.operator,label:e.operator},u=n[i]??n[i.toLowerCase()]??[s,s];return"string"==typeof u?u:u[+("field"===t)]},e7=e=>ep(e.operator).toLowerCase(),e8=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{quoteFieldNamesWith:t=["",""],fieldIdentifierSeparator:o="",quoteValuesWith:a="'",operatorProcessor:r=e7,valueProcessor:n=eO,concatOperator:i="||"}=l,s=n(e,{...l,quoteFieldNamesWith:t,fieldIdentifierSeparator:o,quoteValuesWith:a,concatOperator:i}),u=r(e,l),d=u.toLowerCase();return"in"!==d&&"not in"!==d&&"between"!==d&&"not between"!==d||s?`${eG(e.field,{quoteFieldNamesWith:t,fieldIdentifierSeparator:o})} ${u} ${s}`.trim():""},e9=(e,l,t)=>{let{fieldData:o,format:a,getNextNamedParam:r,parseNumbers:n,paramPrefix:i,paramsKeepPrefix:s,numberedParams:u,quoteFieldNamesWith:d=["",""],concatOperator:c,operatorProcessor:p=e7,valueProcessor:h=eO}=l??{},{processedParams:b=[]}=t??{},m="parameterized"===a,f=[],v={},g=e=>m?{sql:e,params:f}:{sql:e,params:v},G=h(e,{parseNumbers:n,quoteFieldNamesWith:d,concatOperator:c,fieldData:o,format:a}),y=p(e,l),R=y.toLowerCase(),[$,A]=d;if(("in"===R||"not in"===R||"between"===R||"not between"===R)&&!G)return g("");if("is null"===R||"is not null"===R)return g(`${$}${e.field}${A} ${y}`);if("field"===e.valueSource)return g(`${$}${e.field}${A} ${y} ${G}`.trim());if("in"===R||"not in"===R){let l=H(e.value);if(m){for(let e of l)f.push(ev(e,n)?ed(e,{parseNumbers:n}):e);return g(`${$}${e.field}${A} ${y} (${l.map((e,t)=>u?`${i}${b.length+1+l.length-(l.length-t)}`:"?").join(", ")})`)}let t=[];for(let o of l){let l=r(e.field);t.push(`${i}${l}`),v[`${s?i:""}${l}`]=ev(o,n)?ed(o,{parseNumbers:n}):o}return g(`${$}${e.field}${A} ${y} (${t.join(", ")})`)}if("between"===R||"not between"===R){let[l,t]=H(e.value,{retainEmptyStrings:!0}).slice(0,2).map(e=>ev(e,n)?ed(e,{parseNumbers:n}):e);if(m)return f.push(l,t),g(`${$}${e.field}${A} ${y} ${u?`${i}${b.length+1}`:"?"} and ${u?`${i}${b.length+2}`:"?"}`);let o=r(e.field),a=r(e.field);return v[`${s?i:""}${o}`]=l,v[`${s?i:""}${a}`]=t,g(`${$}${e.field}${A} ${y} ${i}${o} and ${i}${a}`)}let w=e.value;"string"==typeof e.value&&(w=ev(e.value,n)?ed(e.value,{parseNumbers:n}):/^'.*'$/g.test(G)?G.replaceAll(/(^'|'$)/g,""):G);let k="";return m?f.push(w):(k=r(e.field),v[`${s?i:""}${k}`]=w),g(`${$}${e.field}${A} ${y} ${m?u?`${i}${b.length+1}`:"?":`${i}${k}`}`.trim())},le=e=>e.operator,ll=e=>(l,t,o,a)=>e({field:l,operator:t,value:o,valueSource:a},{parseNumbers:!1});ll(eO),ll(eC),ll(eS),ll(eE);var lt=(e,l)=>{let t=l,o=0;for(;o<e.length&&t&&W(t);){let l=t.rules[e[o]];t="string"==typeof l?null:l,o++}return t},lo=(e,l)=>{if(l.id===e)return l;for(let t of l.rules)if("string"!=typeof t){if(t.id===e)return t;else if(W(t)){let l=lo(e,t);if(l)return l}}return null},la=(e,l)=>{if(l.id===e)return[];let t=l.rules.findIndex(l=>"string"!=typeof l&&l.id===e);if(t>=0)return[t];for(let[t,o]of Object.entries(l.rules))if(W(o)){let l=la(e,o);if(Array.isArray(l))return[parseInt(t),...l]}return null},lr=e=>e.slice(0,-1),ln=(e,l)=>e.length===l.length&&e.every((e,t)=>e===l[t]),li=(e,l)=>{let t=[],o=lr(e),a=lr(l),r=0;for(;r<o.length&&r<a.length&&o[r]===a[r];)t.push(a[r]),r++;return t},ls=(e,l)=>{let t=!!l.disabled,o=l,a=0;for(;a<e.length&&!t&&W(o);){let l=o.rules[e[a]];B(l)&&(W(l)||"field"in l&&l.field)&&(t=!!l.disabled,o=l),a++}return t},lu=e=>ln([],e.path)?"Query builder":`Rule group at path ${e.path.join("-")}`,ld=globalThis.crypto,lc=()=>"00-0-4-2-000".replaceAll(/[^-]/g,e=>((Math.random()+Math.trunc(e))*65536>>parseInt(e)).toString(16).padStart(4,"0"));if(ld){if("function"==typeof ld.randomUUID)lc=()=>ld.randomUUID();else if("function"==typeof ld.getRandomValues){let e=new Uint32Array(32);lc=()=>{ld.getRandomValues(e);let l=(e[0]%16).toString(16);for(let t=1;t<32;t++)l=12===t?`${l}4`:16===t?`${l}${"89ab"[e[17]%4]}`:`${l}${(e[t]%16).toString(16)}`,(7===t||11===t||15===t||19===t)&&(l=`${l}-`);return l}}}var lp=(e,l)=>!1!==e&&(!!e||!1!==l),lh=(e,l)=>!!e||!1!==e&&!!l,lb=(e,l,t)=>e?lp(l,t):lh(l,t),lm=(e,l,t)=>lb(e,l,t),lf=e=>{let l="boolean"==typeof e?e:"object"==typeof e&&null!==e?e.valid:null;return"boolean"==typeof l?l?m.valid:m.invalid:""},lv=["value"],lg={name:"name",value:"name",valueSources:null,label:"label"},lG=(e,l,t)=>{let o=e?Z(e):lg;if(o.valueSources)return"function"==typeof o.valueSources?o.valueSources(l):o.valueSources;if(t){let e=t(o.value,l,{fieldData:Z(o)});if(e)return e}return lv},ly=(e,l)=>y(l.map(l=>y(l?.[e]))),lR=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return{queryBuilder:ly("queryBuilder",l),ruleGroup:ly("ruleGroup",l),header:ly("header",l),body:ly("body",l),combinators:ly("combinators",l),addRule:ly("addRule",l),addGroup:ly("addGroup",l),cloneRule:ly("cloneRule",l),cloneGroup:ly("cloneGroup",l),removeGroup:ly("removeGroup",l),rule:ly("rule",l),fields:ly("fields",l),operators:ly("operators",l),value:ly("value",l),removeRule:ly("removeRule",l),notToggle:ly("notToggle",l),shiftActions:ly("shiftActions",l),dragHandle:ly("dragHandle",l),lockRule:ly("lockRule",l),lockGroup:ly("lockGroup",l),valueSource:ly("valueSource",l),actionElement:ly("actionElement",l),valueSelector:ly("valueSelector",l),betweenRules:ly("betweenRules",l),valid:ly("valid",l),invalid:ly("invalid",l),dndDragging:ly("dndDragging",l),dndOver:ly("dndOver",l),dndCopy:ly("dndCopy",l),dndGroup:ly("dndGroup",l),disabled:ly("disabled",l),valueListItem:ly("valueListItem",l),branches:ly("branches",l)}},l$=Object.keys,lA=Object.entries,lw=(e,l,t)=>{let o=lA(l).map(l=>{let[o,[a,r]]=l;return[o,a??r??(t?lK:{})[e]?.[o]]}).filter(e=>!!e[1]);return o.length>0?{[e]:Object.fromEntries(o)}:void 0},lk=function(e){let{idGenerator:l=lc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.jM)(e,e=>{e.id||(e.id=l())})},lD=function(e){let{idGenerator:l=lc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.jM)(e,e=>{e.id||(e.id=l()),e.rules=e.rules.map(e=>"string"==typeof e?e:W(e)?lD(e,{idGenerator:l}):lk(e,{idGenerator:l}))})},lS=function(e){let{idGenerator:l=lc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(e)?lD(e,{idGenerator:l}):lk(e,{idGenerator:l})},lN=function(e){let{idGenerator:l=lc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return structuredClone({...e,id:l()})},lC=function(e){let{idGenerator:l=lc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!B(e))return e;if(!W(e))return structuredClone({...e,id:l()});if(P(e)){let t=e.rules.map(e=>W(e)?lC(e,{idGenerator:l}):lN(e,{idGenerator:l}));return{...e,id:l(),rules:t}}let t=e.rules.map(e=>"string"==typeof e?e:W(e)?lC(e,{idGenerator:l}):lN(e,{idGenerator:l}));return{...e,id:l(),rules:t}},lx=function(e,l,t){let{combinators:o=b,combinatorPreceding:a,idGenerator:r=lc}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,s.jM)(e,e=>{let n=Array.isArray(t)?lt(t,e):lo(t,e);if(n&&W(n)){if(F(n)&&n.rules.length>0){let e=n.rules.at(-2);n.rules.push(a??("string"==typeof e?e:er(o)))}n.rules.push(lS(l,{idGenerator:r}))}})},lj=function(e,l,t,o){let{resetOnFieldChange:a=!0,resetOnOperatorChange:r=!1,getRuleDefaultOperator:n=()=>"=",getValueSources:i=()=>["value"],getRuleDefaultValue:u=()=>""}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,s.jM)(e,e=>{let s=Array.isArray(o)?o:la(o,e);if(!s)return;if("combinator"===l&&!P(e)){let l=lt(lr(s),e).rules;s.at(-1)%2==1&&(l[s.at(-1)]=t);return}let d=lt(s,e);if(!d)return;let c=W(d);if(d[l]===t||("valueSource"!==l&&(d[l]=t),c))return;let p=!1,h=!1;a&&"field"===l&&(d.operator=n(t),p=!0,h=!0),r&&"operator"===l&&(p=!0,h=!0);let b=i(d.field,d.operator)[0];(p&&d.valueSource&&b!==d.valueSource||"valueSource"===l&&t!==d.valueSource)&&(h=!!d.valueSource||!d.valueSource&&t!==b,d.valueSource=p?b:t),h&&(d.value=u(d))})},lL=(e,l)=>{let t=Array.isArray(l)?l:la(l,e);return t&&0!==t.length&&(P(e)||lt(t,e))?(0,s.jM)(e,e=>{let l=t.at(-1),o=lt(lr(t),e);o&&W(o)&&(!P(o)&&o.rules.length>1?o.rules.splice(0===l?0:l-1,2):o.rules.splice(l,1))}):e},lE=(e,l,t)=>{if(Array.isArray(t))return t;let o=F(e);if("up"===t)if(ln(l,[0]));else if(0===l.at(-1)){let e=lr(l);return[...lr(e),Math.max(0,e.at(-1)-!!o)]}else{let t=[...lr(l),Math.max(0,l.at(-1)-(o?2:1))],a=lt(t,e);return W(a)?[...t,a.rules.length]:[...lr(l),Math.max(0,l.at(-1)-(o?3:1))]}else if("down"===t)if(ln([e.rules.length-1],l));else if(l.at(-1)===lt(lr(l),e).rules.length-1){let e=lr(l);return[...lr(e),e.at(-1)+1]}else{let t=[...lr(l),l.at(-1)+(o?2:1)];return W(lt(t,e))?[...t,0]:[...lr(l),l.at(-1)+(o?3:2)]}return l},lM=function(e,l,t){let{clone:o=!1,combinators:a=b,idGenerator:r=lc}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=Array.isArray(l)?l:la(l,e);if(!n)return e;let i=lE(e,n,t);if(0===n.length||ln(n,i)||!lt(lr(i),e))return e;let u=lt(n,e);if(!u)return e;let d=o?lC(u,{idGenerator:r}):u;return(0,s.jM)(e,e=>{let l=F(e),t=lt(lr(n),e),r=n.at(-1),s=l&&r>0?t.rules[r-1]:null,u=l&&r<t.rules.length-1?t.rules[r+1]:null;if(!o){let e=l?Math.max(0,r-1):r,o=l?2:1;t.rules.splice(e,o)}let c=[...i],p=li(n,i);!o&&n.length===p.length+1&&i[p.length]>n[p.length]&&(c[p.length]-=l?2:1);let h=lt(lr(c),e),b=c.at(-1),m=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return h.rules.splice(b,0,...l)};0!==h.rules.length&&l?0===b?m(d,0===r&&u?u:h.rules[1]??s??er(a)):m(s||(h.rules[b-2]??u??er(a)),d):m(d)})},lO=function(e,l,t){let{clone:o=!1,combinators:a=b,idGenerator:r=lc}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=Array.isArray(l)?l:la(l,e),i=Array.isArray(t)?t:la(t,e);if(!n||!i)return e;let u=lE(e,n,i);if(0===n.length||ln(n,u)||!lt(lr(u),e))return e;let d=lt(n,e),c=lt(i,e);if(!d||!c)return e;let p=o?lC(d,{idGenerator:r}):d;return(0,s.jM)(e,e=>{let l=F(e),t=lt(lr(n),e),i=n.at(-1);if(!o){let e=l?Math.max(0,i-1):i;t.rules.splice(e,l?2:1)}let s=[...u],d=li(n,u);!o&&n.length===d.length+1&&u[d.length]>n[d.length]&&(s[d.length]-=l?2:1);let h=lt(lr(s),e),b=s.at(-1);h.rules.splice(b,1,lS(l?{rules:[c,er(a),p]}:{combinator:er(a),rules:[c,p]},{idGenerator:r}))})},lT=e=>el(e)?e.map(e=>(0,a.jsx)("optgroup",{label:e.label,children:e.options.map(e=>(0,a.jsx)("option",{value:e.name,disabled:e.disabled,children:e.label},e.name))},e.label)):Array.isArray(e)?e.map(e=>(0,a.jsx)("option",{value:e.name,disabled:e.disabled,children:e.label},e.name)):null,lI=o.memo(function(e){let l,t=M(7),o=lH(e),r=O(o.cloneRule),n=O(o.toggleLockRule),i=O(o.removeRule),s=O(o.shiftRuleUp),u=O(o.shiftRuleDown);return t[0]!==r||t[1]!==o||t[2]!==i||t[3]!==u||t[4]!==s||t[5]!==n?(l=(0,a.jsx)("div",{ref:o.dndRef,"data-testid":v.rule,"data-dragmonitorid":o.dragMonitorId,"data-dropmonitorid":o.dropMonitorId,className:o.outerClassName,"data-rule-id":o.id,"data-level":o.path.length,"data-path":JSON.stringify(o.path),children:(0,a.jsx)(lq,{...o,cloneRule:r,toggleLockRule:n,removeRule:i,shiftRuleUp:s,shiftRuleDown:u})}),t[0]=r,t[1]=o,t[2]=i,t[3]=u,t[4]=s,t[5]=n,t[6]=l):l=t[6],l}),lq=o.memo(function(e){let{schema:{controls:{shiftActions:l,dragHandle:t,fieldSelector:o,operatorSelector:r,valueSourceSelector:n,valueEditor:i,cloneRuleAction:s,lockRuleAction:u,removeRuleAction:d}}}=e;return(0,a.jsxs)(a.Fragment,{children:[e.schema.showShiftActions&&(0,a.jsx)(l,{testID:v.shiftActions,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftRuleUp,shiftDown:e.shiftRuleDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},v.shiftActions),e.schema.enableDragAndDrop&&(0,a.jsx)(t,{testID:v.dragHandle,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule},v.dragHandle),(0,a.jsx)(o,{testID:v.fields,options:e.schema.fields,title:e.translations.fields.title,value:e.rule.field,operator:e.rule.operator,className:e.classNames.fields,handleOnChange:e.onChangeField,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},v.fields),(e.schema.autoSelectField||e.rule.field!==e.translations.fields.placeholderName)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{testID:v.operators,field:e.rule.field,fieldData:e.fieldData,title:e.translations.operators.title,options:e.operators,value:e.rule.operator,className:e.classNames.operators,handleOnChange:e.onChangeOperator,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},v.operators),(e.schema.autoSelectOperator||e.rule.operator!==e.translations.operators.placeholderName)&&!e.hideValueControls&&(0,a.jsxs)(a.Fragment,{children:[!["null","notNull"].includes(e.rule.operator)&&e.valueSources.length>1&&(0,a.jsx)(n,{testID:v.valueSourceSelector,field:e.rule.field,fieldData:e.fieldData,title:e.translations.valueSourceSelector.title,options:e.valueSourceOptions,value:e.rule.valueSource??"value",className:e.classNames.valueSource,handleOnChange:e.onChangeValueSource,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},v.valueSourceSelector),(0,a.jsx)(i,{testID:v.valueEditor,field:e.rule.field,fieldData:e.fieldData,title:e.translations.value.title,operator:e.rule.operator,value:e.rule.value,valueSource:e.rule.valueSource??"value",type:e.valueEditorType,inputType:e.inputType,values:e.values,listsAsArrays:e.schema.listsAsArrays,parseNumbers:e.schema.parseNumbers,separator:e.valueEditorSeparator,className:e.classNames.value,handleOnChange:e.onChangeValue,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule},v.valueEditor)]})]}),e.schema.showCloneButtons&&(0,a.jsx)(s,{testID:v.cloneRule,label:e.translations.cloneRule.label,title:e.translations.cloneRule.title,className:e.classNames.cloneRule,handleOnClick:e.cloneRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},v.cloneRule),e.schema.showLockButtons&&(0,a.jsx)(u,{testID:v.lockRule,label:e.translations.lockRule.label,title:e.translations.lockRule.title,className:e.classNames.lockRule,handleOnClick:e.toggleLockRule,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockRuleDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},v.lockRule),(0,a.jsx)(d,{testID:v.removeRule,label:e.translations.removeRule.label,title:e.translations.removeRule.title,className:e.classNames.removeRule,handleOnClick:e.removeRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema},v.removeRule)]})}),lH=e=>{let{id:l,path:t,rule:a,schema:{classNames:r,fields:n,fieldMap:i,getInputType:s,getOperators:u,getValueEditorType:d,getValueEditorSeparator:c,getValueSources:p,getValues:h,validationMap:b,enableDragAndDrop:f,getRuleClassname:v,suppressStandardClassnames:g},actions:{moveRule:G,onPropChange:R,onRuleRemove:$},disabled:A,parentDisabled:w,shiftUpDisabled:k,shiftDownDisabled:D,field:N,operator:C,value:x,valueSource:j,dropEffect:E="move",groupItems:M=!1,dragMonitorId:O="",dropMonitorId:T="",dndRef:I=null,dragRef:q=null,isDragging:H=!1,isOver:U=!1}=e;S(),L(f,!!(O||T||I||q));let B=!!w||!!A,Q=(0,o.useMemo)(()=>a??{id:l,field:N??"",operator:C??"",value:x,valueSource:j},[N,l,C,a,x,j]),W=(0,o.useMemo)(()=>({shiftActions:y(g||m.shiftActions,r.shiftActions),dragHandle:y(g||m.dragHandle,r.dragHandle),fields:y(g||m.fields,r.valueSelector,r.fields),operators:y(g||m.operators,r.valueSelector,r.operators),valueSource:y(g||m.valueSource,r.valueSelector,r.valueSource),value:y(g||m.value,r.value),cloneRule:y(g||m.cloneRule,r.actionElement,r.cloneRule),lockRule:y(g||m.lockRule,r.actionElement,r.lockRule),removeRule:y(g||m.removeRule,r.actionElement,r.removeRule),valueListItem:y(g||m.valueListItem,r.valueListItem)}),[r.shiftActions,r.dragHandle,r.valueSelector,r.fields,r.operators,r.valueSource,r.value,r.actionElement,r.cloneRule,r.lockRule,r.removeRule,r.valueListItem,g]),P=(0,o.useCallback)(e=>(l,o)=>{B||R(e,l,t,o)},[B,R,t]),F=(0,o.useMemo)(()=>P("field"),[P]),V=(0,o.useMemo)(()=>P("operator"),[P]),_=(0,o.useMemo)(()=>P("valueSource"),[P]),z=(0,o.useMemo)(()=>P("value"),[P]),K=(0,o.useCallback)((e,l)=>{if(!B){let e=[...lr(t),t.at(-1)+1];G(t,e,!0,l)}},[B,G,t]),J=(0,o.useCallback)((e,l)=>R("disabled",!B,t,l),[B,R,t]),Z=(0,o.useCallback)((e,l)=>{B||$(t)},[B,$,t]),Y=(0,o.useCallback)((e,l)=>{B||k||G(t,"up",e?.altKey,l)},[B,G,t,k]),ee=(0,o.useCallback)((e,l)=>{B||D||G(t,"down",e?.altKey,l)},[B,G,t,D]),el=(0,o.useMemo)(()=>i?.[Q.field]??{name:Q.field,value:Q.field,label:Q.field},[i,Q.field]),er=(0,o.useMemo)(()=>el.inputType??s(Q.field,Q.operator,{fieldData:el}),[el,s,Q.field,Q.operator]),en=(0,o.useMemo)(()=>u(Q.field,{fieldData:el}),[el,u,Q.field]),ei=(0,o.useMemo)(()=>ea(en,Q.operator),[en,Q.operator]),es=ei?.arity,ed=(0,o.useMemo)(()=>"function"==typeof el.valueSources?el.valueSources(Q.operator):el.valueSources??p(Q.field,Q.operator,{fieldData:el}),[el,p,Q.field,Q.operator]),ec=(0,o.useMemo)(()=>"field"===Q.valueSource?"select":d(Q.field,Q.operator,{fieldData:el}),[el,d,Q.field,Q.operator,Q.valueSource]),ep=(0,o.useMemo)(()=>c(Q.field,Q.operator,{fieldData:el}),[el,c,Q.field,Q.operator]),eh=(0,o.useMemo)(()=>{let e="field"===Q.valueSource?eu(el,n,Q.operator):h(Q.field,Q.operator,{fieldData:el});return et(e)||eo(e)?X(e):e},[el,n,h,Q.field,Q.operator,Q.valueSource]),eb=(0,o.useMemo)(()=>ed.map(e=>({name:e,value:e,label:e})),[ed]),em=(0,o.useMemo)(()=>b[l??""]??("function"==typeof el.validator?el.validator(Q):null),[el,l,Q,b]),ef=(0,o.useMemo)(()=>lf(em),[em]),ev=(0,o.useMemo)(()=>el?.className??"",[el?.className]),eg=(0,o.useMemo)(()=>ei?.className??"",[ei?.className]),eG=(0,o.useMemo)(()=>y(v(Q,{fieldData:el}),ev,eg,g||m.rule,r.rule,B&&r.disabled,H&&r.dndDragging,U&&r.dndOver,U&&"copy"===E&&r.dndCopy,U&&M&&r.dndGroup,g||{[m.disabled]:B,[m.dndDragging]:H,[m.dndOver]:U,[m.dndCopy]:U&&"copy"===E,[m.dndGroup]:U&&M},ef),[r.disabled,r.dndCopy,r.dndDragging,r.dndGroup,r.dndOver,r.rule,B,E,ev,el,v,M,H,U,eg,Q,g,ef]);return{...e,classNames:W,cloneRule:K,disabled:B,dndRef:I,dragMonitorId:O,dragRef:q,dropMonitorId:T,fieldData:el,generateOnChangeHandler:P,onChangeField:F,onChangeOperator:V,onChangeValueSource:_,onChangeValue:z,hideValueControls:"string"==typeof es&&"unary"===es||"number"==typeof es&&es<2,inputType:er,operators:en,outerClassName:eG,removeRule:Z,rule:Q,shiftRuleUp:Y,shiftRuleDown:ee,toggleLockRule:J,validationResult:em,valueEditorSeparator:ep,valueEditorType:ec,values:eh,valueSourceOptions:eb,valueSources:ed}},lU=o.memo(function(e){let l,t=M(11),o=lW(e),{schema:r}=o,{controls:n}=r,{ruleGroupBodyElements:i,ruleGroupHeaderElements:s}=n,u=O(o.addRule),d=O(o.addGroup),c=O(o.cloneGroup),p=O(o.toggleLockGroup),h=O(o.removeGroup),b=O(o.shiftGroupUp),m=O(o.shiftGroupDown);return t[0]!==i||t[1]!==s||t[2]!==d||t[3]!==u||t[4]!==c||t[5]!==h||t[6]!==o||t[7]!==m||t[8]!==b||t[9]!==p?(l=(0,a.jsxs)("div",{ref:o.previewRef,title:o.accessibleDescription,className:o.outerClassName,"data-testid":v.ruleGroup,"data-dragmonitorid":o.dragMonitorId,"data-dropmonitorid":o.dropMonitorId,"data-rule-group-id":o.id,"data-level":o.path.length,"data-path":JSON.stringify(o.path),children:[(0,a.jsx)("div",{ref:o.dropRef,className:o.classNames.header,children:(0,a.jsx)(s,{...o,addRule:u,addGroup:d,cloneGroup:c,toggleLockGroup:p,removeGroup:h,shiftGroupUp:b,shiftGroupDown:m})}),(0,a.jsx)("div",{className:o.classNames.body,children:(0,a.jsx)(i,{...o,addRule:u,addGroup:d,cloneGroup:c,toggleLockGroup:p,removeGroup:h,shiftGroupUp:b,shiftGroupDown:m})})]}),t[0]=i,t[1]=s,t[2]=d,t[3]=u,t[4]=c,t[5]=h,t[6]=o,t[7]=m,t[8]=b,t[9]=p,t[10]=l):l=t[10],l}),lB=o.memo(function(e){let{schema:{controls:{shiftActions:l,dragHandle:t,combinatorSelector:o,notToggle:r,addRuleAction:n,addGroupAction:i,cloneGroupAction:s,lockGroupAction:u,removeGroupAction:d}}}=e;return(0,a.jsxs)(a.Fragment,{children:[e.schema.showShiftActions&&e.path.length>0&&(0,a.jsx)(l,{testID:v.shiftActions,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftGroupUp,shiftDown:e.shiftGroupDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},v.shiftActions),e.path.length>0&&e.schema.enableDragAndDrop&&(0,a.jsx)(t,{testID:v.dragHandle,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup},v.dragHandle),!e.schema.showCombinatorsBetweenRules&&!e.schema.independentCombinators&&(0,a.jsx)(o,{testID:v.combinators,options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema},v.combinators),e.schema.showNotToggle&&(0,a.jsx)(r,{testID:v.notToggle,className:e.classNames.notToggle,title:e.translations.notToggle.title,label:e.translations.notToggle.label,checked:e.ruleGroup.not,handleOnChange:e.onNotToggleChange,level:e.path.length,disabled:e.disabled,path:e.path,context:e.context,validation:e.validationResult,schema:e.schema,ruleGroup:e.ruleGroup},v.notToggle),(0,a.jsx)(n,{testID:v.addRule,label:e.translations.addRule.label,title:e.translations.addRule.title,className:e.classNames.addRule,handleOnClick:e.addRule,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},v.addRule),(0,a.jsx)(i,{testID:v.addGroup,label:e.translations.addGroup.label,title:e.translations.addGroup.title,className:e.classNames.addGroup,handleOnClick:e.addGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},v.addGroup),e.schema.showCloneButtons&&e.path.length>0&&(0,a.jsx)(s,{testID:v.cloneGroup,label:e.translations.cloneRuleGroup.label,title:e.translations.cloneRuleGroup.title,className:e.classNames.cloneGroup,handleOnClick:e.cloneGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},v.cloneGroup),e.schema.showLockButtons&&(0,a.jsx)(u,{testID:v.lockGroup,label:e.translations.lockGroup.label,title:e.translations.lockGroup.title,className:e.classNames.lockGroup,handleOnClick:e.toggleLockGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockGroupDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},v.lockGroup),e.path.length>0&&(0,a.jsx)(d,{testID:v.removeGroup,label:e.translations.removeGroup.label,title:e.translations.removeGroup.title,className:e.classNames.removeGroup,handleOnClick:e.removeGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema},v.removeGroup)]})}),lQ=o.memo(function(e){let{schema:{controls:{combinatorSelector:l,inlineCombinator:t,ruleGroup:r,rule:n}}}=e;return(0,a.jsx)(a.Fragment,{children:e.ruleGroup.rules.map((i,s,u)=>{let{length:d}=u,c=e.pathsMemo[s],p=c.path,h=c.disabled||"string"!=typeof i&&i.disabled,b=ln([0],p),m=0===e.path.length&&s===d-1,f="string"==typeof i?[...p,i].join("-"):i.id;return(0,a.jsxs)(o.Fragment,{children:[s>0&&!e.schema.independentCombinators&&e.schema.showCombinatorsBetweenRules&&(0,a.jsx)(t,{options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:l,path:p,disabled:e.disabled,schema:e.schema},v.inlineCombinator),"string"==typeof i?(0,a.jsx)(t,{options:e.schema.combinators,value:i,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:l=>e.onIndependentCombinatorChange(l,s),rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:l,path:p,disabled:h,schema:e.schema},`${v.inlineCombinator}-independent`):W(i)?(0,a.jsx)(r,{id:i.id,schema:e.schema,actions:e.actions,path:p,translations:e.translations,ruleGroup:i,rules:i.rules,combinator:P(i)?i.combinator:void 0,not:!!i.not,disabled:h,parentDisabled:e.parentDisabled||e.disabled,shiftUpDisabled:b,shiftDownDisabled:m,context:e.context},v.ruleGroup):(0,a.jsx)(n,{id:i.id,rule:i,field:i.field,operator:i.operator,value:i.value,valueSource:i.valueSource,schema:e.schema,actions:e.actions,path:p,disabled:h,parentDisabled:e.parentDisabled||e.disabled,translations:e.translations,shiftUpDisabled:b,shiftDownDisabled:m,context:e.context},v.rule)]},f)})})}),lW=e=>{let{id:l,path:t,ruleGroup:a,schema:{qbId:r,accessibleDescriptionGenerator:n,classNames:i,combinators:s,createRule:u,createRuleGroup:d,disabledPaths:c,independentCombinators:p,validationMap:h,enableDragAndDrop:b,getRuleGroupClassname:f,suppressStandardClassnames:v},actions:{onGroupAdd:g,onGroupRemove:G,onPropChange:R,onRuleAdd:$,moveRule:A},disabled:w,parentDisabled:k,shiftUpDisabled:D,shiftDownDisabled:N,combinator:C,rules:x,not:j,dropEffect:E="move",groupItems:M=!1,dragMonitorId:O="",dropMonitorId:T="",previewRef:I=null,dragRef:q=null,dropRef:H=null,isDragging:U=!1,isOver:B=!1}=e;S(),L(b,!!(O||T||I||q||H));let Q=!!k||!!w,W=(0,o.useMemo)(()=>a&&P(a)?a.combinator:a?er(s):C??er(s),[C,s,a]),F=(0,o.useMemo)(()=>{if(a){if(a.combinator===W||p)return a;let e=structuredClone(a);return e.combinator=W,e}return{rules:x,not:j}},[W,p,j,a,x]),V=(0,o.useMemo)(()=>({header:y(v||m.header,i.header,B&&"copy"===E&&i.dndCopy,v||{[m.dndOver]:B,[m.dndCopy]:B&&"copy"===E}),shiftActions:y(v||m.shiftActions,i.shiftActions),dragHandle:y(v||m.dragHandle,i.dragHandle),combinators:y(v||m.combinators,i.valueSelector,i.combinators),notToggle:y(v||m.notToggle,i.notToggle),addRule:y(v||m.addRule,i.actionElement,i.addRule),addGroup:y(v||m.addGroup,i.actionElement,i.addGroup),cloneGroup:y(v||m.cloneGroup,i.actionElement,i.cloneGroup),lockGroup:y(v||m.lockGroup,i.actionElement,i.lockGroup),removeGroup:y(v||m.removeGroup,i.actionElement,i.removeGroup),body:y(v||m.body,i.body)}),[i.actionElement,i.addGroup,i.addRule,i.body,i.cloneGroup,i.combinators,i.dndCopy,i.dragHandle,i.header,i.lockGroup,i.notToggle,i.removeGroup,i.shiftActions,i.valueSelector,E,B,v]),_=(0,o.useCallback)(e=>{Q||R("combinator",e,t)},[Q,R,t]),z=(0,o.useCallback)((e,l,o)=>{Q||R("combinator",e,[...t,l])},[Q,R,t]),K=(0,o.useCallback)((e,l)=>{Q||R("not",e,t)},[Q,R,t]),J=(0,o.useCallback)((e,l)=>{Q||$(u(),t,l)},[u,Q,$,t]),Z=(0,o.useCallback)((e,l)=>{Q||g(d(p),t,l)},[d,Q,p,g,t]),X=(0,o.useCallback)(()=>{if(!Q){let e=[...lr(t),t.at(-1)+1];A(t,e,!0)}},[Q,A,t]),Y=(0,o.useCallback)((e,l)=>{Q||D||A(t,"up",e?.altKey)},[Q,A,t,D]),ee=(0,o.useCallback)((e,l)=>{Q||N||A(t,"down",e?.altKey)},[Q,A,t,N]),el=(0,o.useCallback)(()=>{R("disabled",!Q,t)},[Q,R,t]),et=(0,o.useCallback)(()=>{Q||G(t)},[Q,G,t]),eo=(0,o.useMemo)(()=>h[l??""],[l,h]),en=(0,o.useMemo)(()=>lf(eo),[eo]),ei=(0,o.useMemo)(()=>p?null:ea(s,W)?.className??"",[W,s,p]),es=(0,o.useMemo)(()=>f(F),[f,F]),eu=(0,o.useMemo)(()=>y(es,ei,v||m.ruleGroup,i.ruleGroup,Q&&i.disabled,U&&i.dndDragging,B&&M&&i.dndGroup,v||{[m.disabled]:Q,[m.dndDragging]:U,[m.dndGroup]:B&&M},en),[i.disabled,i.dndDragging,i.dndGroup,i.ruleGroup,ei,Q,M,U,B,es,v,en]),ed=(0,o.useMemo)(()=>{let e=[];for(let l=0;l<F.rules.length;l++){let o=[...t,l];e[l]={path:o,disabled:Q||c.some(e=>ln(o,e))}}return e},[Q,t,F.rules.length,c]),ec=(0,o.useMemo)(()=>n({path:t,qbId:r}),[n,t,r]);return{...e,addGroup:Z,addRule:J,accessibleDescription:ec,classNames:V,cloneGroup:X,combinator:W,disabled:Q,dragMonitorId:O,dragRef:q,dropMonitorId:T,dropRef:H,isDragging:U,isOver:B,onCombinatorChange:_,onGroupAdd:g,onIndependentCombinatorChange:z,onNotToggleChange:K,outerClassName:eu,parentDisabled:k,pathsMemo:ed,previewRef:I,removeGroup:et,ruleGroup:F,shiftGroupUp:Y,shiftGroupDown:ee,toggleLockGroup:el,validationClassName:en,validationResult:eo}},lP=e=>{let l,t,a,r,n,i,u,d,c,p=M(29),{handleOnChange:h,inputType:b,operator:f,value:v,listsAsArrays:g,parseNumbers:G,values:R,type:$,skipHook:A,schema:w}=e,{classNames:k,suppressStandardClassnames:D}=w;p[0]!==h||p[1]!==b||p[2]!==f||p[3]!==A||p[4]!==$||p[5]!==v?(l=()=>{!A&&"multiselect"!==$&&!["between","notBetween","in","notIn"].includes(f)&&(Array.isArray(v)||"number"===b&&"string"==typeof v&&v.includes(","))&&h(H(v,{retainEmptyStrings:!0})[0]??"")},t=[h,b,f,A,$,v],p[0]=h,p[1]=b,p[2]=f,p[3]=A,p[4]=$,p[5]=v,p[6]=l,p[7]=t):(l=p[6],t=p[7]),(0,o.useEffect)(l,t),p[8]!==v?(r=H(v,{retainEmptyStrings:!0}),p[8]=v,p[9]=r):r=p[9],a=r,p[10]!==b||p[11]!==G?(i=ec({parseNumbers:G,inputType:b}),p[10]=b,p[11]=G,p[12]=i):i=p[12],n=i,p[13]!==h||p[14]!==g||p[15]!==f||p[16]!==n||p[17]!==a||p[18]!==R?(u=(e,l)=>{let t=(0,s.jM)(a,t=>{t[l]=ed(e,{parseNumbers:n}),0===l&&("between"===f||"notBetween"===f)&&(t.length<2||void 0===t[1])&&(t[1]=er(R))});h(g?t:I(t,","))},p[13]=h,p[14]=g,p[15]=f,p[16]=n,p[17]=a,p[18]=R,p[19]=u):u=p[19];let S=u,N=D||m.valueListItem,C=k?.valueListItem;p[20]!==N||p[21]!==C?(d=y(N,C),p[20]=N,p[21]=C,p[22]=d):d=p[22];let x=d,j="in"===f||"notIn"===f?"text":b||"text";return p[23]!==j||p[24]!==S||p[25]!==n||p[26]!==a||p[27]!==x?(c={valueAsArray:a,multiValueHandler:S,parseNumberMethod:n,valueListItemClassName:x,inputTypeCoerced:j},p[23]=j,p[24]=S,p[25]=n,p[26]=a,p[27]=x,p[28]=c):c=p[28],c},lF=e=>{let l,t=M(3),{multiple:o,onChange:a}=e;return t[0]!==o||t[1]!==a?(l=o?e=>a(Array.from(e.target.selectedOptions).map(lV)):e=>a(e.target.value),t[0]=o,t[1]=a,t[2]=l):l=t[2],l};function lV(e){return e.value}var l_=e=>{let l,t,o=M(12),{onChange:r,val:n}=lz(e);o[0]!==r||o[1]!==e.multiple?(l={multiple:e.multiple,onChange:r},o[0]=r,o[1]=e.multiple,o[2]=l):l=o[2];let i=lF(l),s=!!e.multiple;return o[3]!==e.className||o[4]!==e.disabled||o[5]!==e.options||o[6]!==e.testID||o[7]!==e.title||o[8]!==i||o[9]!==s||o[10]!==n?(t=(0,a.jsx)("select",{"data-testid":e.testID,className:e.className,value:n,title:e.title,disabled:e.disabled,multiple:s,onChange:i,children:lT(e.options)}),o[3]=e.className,o[4]=e.disabled,o[5]=e.options,o[6]=e.testID,o[7]=e.title,o[8]=i,o[9]=s,o[10]=n,o[11]=t):t=o[11],t},lz=e=>{let l,t,o,a,r=M(10),{handleOnChange:n,listsAsArrays:i,multiple:s,value:u}=e,d=void 0!==i&&i,c=void 0!==s&&s;r[0]!==n||r[1]!==d||r[2]!==c?(l=e=>{if(c){let l=H(e);n(d?l:I(l,","))}else n(e)},r[0]=n,r[1]=d,r[2]=c,r[3]=l):l=r[3];let p=l;return r[4]!==c||r[5]!==u?(o=c?H(u):u,r[4]=c,r[5]=u,r[6]=o):o=r[6],t=o,r[7]!==p||r[8]!==t?(a={onChange:p,val:t},r[7]=p,r[8]=t,r[9]=a):a=r[9],a},lK={fields:{title:"Fields",placeholderName:"~",placeholderLabel:p,placeholderGroupLabel:p},operators:{title:"Operators",placeholderName:"~",placeholderLabel:p,placeholderGroupLabel:p},values:{title:"Values",placeholderName:"~",placeholderLabel:p,placeholderGroupLabel:p},value:{title:"Value"},removeRule:{label:"⨯",title:"Remove rule"},removeGroup:{label:"⨯",title:"Remove group"},addRule:{label:"+ Rule",title:"Add rule"},addGroup:{label:"+ Group",title:"Add group"},combinators:{title:"Combinators"},notToggle:{label:"Not",title:"Invert this group"},cloneRule:{label:"⧉",title:"Clone rule"},cloneRuleGroup:{label:"⧉",title:"Clone group"},shiftActionUp:{label:"˄",title:"Shift up"},shiftActionDown:{label:"˅",title:"Shift down"},dragHandle:{label:"⁞⁞",title:"Drag handle"},lockRule:{label:"\uD83D\uDD13",title:"Lock rule"},lockGroup:{label:"\uD83D\uDD13",title:"Lock group"},lockRuleDisabled:{label:"\uD83D\uDD12",title:"Unlock rule"},lockGroupDisabled:{label:"\uD83D\uDD12",title:"Unlock group"},valueSourceSelector:{title:"Value source"}},lJ={actionElement:d,addGroupAction:d,addRuleAction:d,cloneGroupAction:d,cloneRuleAction:d,combinatorSelector:l_,dragHandle:c,fieldSelector:l_,inlineCombinator:e=>{let{component:l,...t}=e,o=y(t.schema.suppressStandardClassnames||m.betweenRules,t.schema.classNames.betweenRules);return(0,a.jsx)("div",{className:o,"data-testid":v.inlineCombinator,children:(0,a.jsx)(l,{...t,testID:v.combinators})})},lockGroupAction:d,lockRuleAction:d,notToggle:e=>(0,a.jsxs)("label",{"data-testid":e.testID,className:e.className,title:e.title,children:[(0,a.jsx)("input",{type:"checkbox",onChange:l=>e.handleOnChange(l.target.checked),checked:!!e.checked,disabled:e.disabled}),e.label]}),operatorSelector:l_,removeGroupAction:d,removeRuleAction:d,rule:lI,ruleGroup:lU,ruleGroupBodyElements:lQ,ruleGroupHeaderElements:lB,shiftActions:e=>(0,a.jsxs)("div",{"data-testid":e.testID,className:e.className,children:[(0,a.jsx)("button",{disabled:e.disabled||e.shiftUpDisabled,onClick:e.shiftUp,title:e.titles?.shiftUp,children:e.labels?.shiftUp}),(0,a.jsx)("button",{disabled:e.disabled||e.shiftDownDisabled,onClick:e.shiftDown,title:e.titles?.shiftDown,children:e.labels?.shiftDown})]}),valueEditor:e=>{let{operator:l,value:t,handleOnChange:o,title:r,className:n,type:i="text",values:s=[],listsAsArrays:u,fieldData:d,disabled:c,separator:p=null,testID:h,selectorComponent:b=e.schema.controls.valueSelector,inputType:m,parseNumbers:f,skipHook:v,valueSource:g,...G}=e,{valueAsArray:y,multiValueHandler:R,parseNumberMethod:$,valueListItemClassName:A,inputTypeCoerced:w}=lP(e);if("null"===l||"notNull"===l)return null;let k=d?.placeholder??"";if(("between"===l||"notBetween"===l)&&("select"===i||"text"===i)){let l=["from","to"].map((l,t)=>"text"===i?(0,a.jsx)("input",{type:w,placeholder:k,value:y[t]??"",className:A,disabled:c,onChange:e=>R(e.target.value,t)},l):(0,a.jsx)(b,{...G,schema:e.schema,className:A,handleOnChange:e=>R(e,t),disabled:c,value:y[t]??er(s),options:s,listsAsArrays:u},l));return(0,a.jsxs)("span",{"data-testid":h,className:n,title:r,children:[l[0],p,l[1]]})}switch(i){case"select":case"multiselect":return(0,a.jsx)(b,{...G,schema:e.schema,testID:h,className:n,title:r,handleOnChange:o,disabled:c,value:t,options:s,multiple:"multiselect"===i,listsAsArrays:u});case"textarea":return(0,a.jsx)("textarea",{"data-testid":h,placeholder:k,value:t,title:r,className:n,disabled:c,onChange:e=>o(e.target.value)});case"switch":case"checkbox":return(0,a.jsx)("input",{"data-testid":h,type:"checkbox",className:n,title:r,onChange:e=>o(e.target.checked),checked:!!t,disabled:c});case"radio":return(0,a.jsx)("span",{"data-testid":h,className:n,title:r,children:s.map(e=>(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"radio",value:e.name,disabled:c,checked:t===e.name,onChange:e=>o(e.target.value)}),e.label]},e.name))})}return(0,a.jsx)("input",{"data-testid":h,type:w,placeholder:k,value:t,title:r,className:n,disabled:c,onChange:e=>o(ed(e.target.value,{parseNumbers:$}))})},valueSelector:l_,valueSourceSelector:l_},lZ=()=>null,lX=(0,o.forwardRef)(lZ),lY={},l1=e=>{let l,t,a,r,n,i,s,d,c,p,h,b,m=M(193);m[0]!==e?({finalize:l,...t}=e,m[0]=e,m[1]=l,m[2]=t):(l=m[1],t=m[2]);let v=(0,o.useContext)(u),g=lm(!1,t.debugMode,v.debugMode),G=l?g:t.debugMode??v.debugMode,y=lm(!0,t.enableMountQueryChange,v.enableMountQueryChange),R=l?y:t.enableMountQueryChange??v.enableMountQueryChange,$=lm(!1,t.enableDragAndDrop,v.enableDragAndDrop)&&!1!==v.enableDragAndDrop,A=l?$:t.enableDragAndDrop??v.enableDragAndDrop;m[3]!==l||m[4]!==t.controlClassnames||m[5]!==v.controlClassnames?(r=lR(l?Object.assign({},f):lY,v.controlClassnames,t.controlClassnames),m[3]=l,m[4]=t.controlClassnames,m[5]=v.controlClassnames,m[6]=r):r=m[6],a=r,m[7]!==a.actionElement||m[8]!==a.addGroup||m[9]!==a.addRule||m[10]!==a.betweenRules||m[11]!==a.body||m[12]!==a.branches||m[13]!==a.cloneGroup||m[14]!==a.cloneRule||m[15]!==a.combinators||m[16]!==a.disabled||m[17]!==a.dndCopy||m[18]!==a.dndDragging||m[19]!==a.dndGroup||m[20]!==a.dndOver||m[21]!==a.dragHandle||m[22]!==a.fields||m[23]!==a.header||m[24]!==a.invalid||m[25]!==a.lockGroup||m[26]!==a.lockRule||m[27]!==a.notToggle||m[28]!==a.operators||m[29]!==a.queryBuilder||m[30]!==a.removeGroup||m[31]!==a.removeRule||m[32]!==a.rule||m[33]!==a.ruleGroup||m[34]!==a.shiftActions||m[35]!==a.valid||m[36]!==a.value||m[37]!==a.valueListItem||m[38]!==a.valueSelector||m[39]!==a.valueSource?(i={actionElement:a.actionElement,addGroup:a.addGroup,addRule:a.addRule,body:a.body,cloneGroup:a.cloneGroup,cloneRule:a.cloneRule,combinators:a.combinators,dragHandle:a.dragHandle,fields:a.fields,header:a.header,lockGroup:a.lockGroup,lockRule:a.lockRule,notToggle:a.notToggle,operators:a.operators,queryBuilder:a.queryBuilder,removeGroup:a.removeGroup,removeRule:a.removeRule,rule:a.rule,ruleGroup:a.ruleGroup,shiftActions:a.shiftActions,value:a.value,valueSelector:a.valueSelector,valueSource:a.valueSource,betweenRules:a.betweenRules,valid:a.valid,invalid:a.invalid,dndDragging:a.dndDragging,dndOver:a.dndOver,dndCopy:a.dndCopy,dndGroup:a.dndGroup,disabled:a.disabled,valueListItem:a.valueListItem,branches:a.branches},m[7]=a.actionElement,m[8]=a.addGroup,m[9]=a.addRule,m[10]=a.betweenRules,m[11]=a.body,m[12]=a.branches,m[13]=a.cloneGroup,m[14]=a.cloneRule,m[15]=a.combinators,m[16]=a.disabled,m[17]=a.dndCopy,m[18]=a.dndDragging,m[19]=a.dndGroup,m[20]=a.dndOver,m[21]=a.dragHandle,m[22]=a.fields,m[23]=a.header,m[24]=a.invalid,m[25]=a.lockGroup,m[26]=a.lockRule,m[27]=a.notToggle,m[28]=a.operators,m[29]=a.queryBuilder,m[30]=a.removeGroup,m[31]=a.removeRule,m[32]=a.rule,m[33]=a.ruleGroup,m[34]=a.shiftActions,m[35]=a.valid,m[36]=a.value,m[37]=a.valueListItem,m[38]=a.valueSelector,m[39]=a.valueSource,m[40]=i):i=m[40],n=i;let w=v.controlElements??lY,k=t.controlElements??lY;m[41]!==w.actionElement||m[42]!==w.valueSelector||m[43]!==l||m[44]!==k.actionElement||m[45]!==k.valueSelector?(s=(e,t,o)=>{let a="dragHandle"===e?lX:lZ,r=(e.endsWith("Action")&&k.actionElement?k.actionElement:void 0)??(e.endsWith("Selector")&&k.valueSelector?k.valueSelector:void 0),n=(e.endsWith("Action")&&w.actionElement?w.actionElement:void 0)??(e.endsWith("Selector")&&w.valueSelector?w.valueSelector:void 0),i=null===t?a:t??(l?r:void 0)??(null===o?a:o??(l?n:void 0));return i?{[e]:i}:l?{[e]:lJ[e]}:lY},m[41]=w.actionElement,m[42]=w.valueSelector,m[43]=l,m[44]=k.actionElement,m[45]=k.valueSelector,m[46]=s):s=m[46];let D=s;m[47]!==w.actionElement||m[48]!==w.addGroupAction||m[49]!==w.addRuleAction||m[50]!==w.cloneGroupAction||m[51]!==w.cloneRuleAction||m[52]!==w.combinatorSelector||m[53]!==w.dragHandle||m[54]!==w.fieldSelector||m[55]!==w.inlineCombinator||m[56]!==w.lockGroupAction||m[57]!==w.lockRuleAction||m[58]!==w.notToggle||m[59]!==w.operatorSelector||m[60]!==w.removeGroupAction||m[61]!==w.removeRuleAction||m[62]!==w.rule||m[63]!==w.ruleGroup||m[64]!==w.ruleGroupBodyElements||m[65]!==w.ruleGroupHeaderElements||m[66]!==w.shiftActions||m[67]!==w.valueEditor||m[68]!==w.valueSelector||m[69]!==w.valueSourceSelector||m[70]!==l||m[71]!==D||m[72]!==k.actionElement||m[73]!==k.addGroupAction||m[74]!==k.addRuleAction||m[75]!==k.cloneGroupAction||m[76]!==k.cloneRuleAction||m[77]!==k.combinatorSelector||m[78]!==k.dragHandle||m[79]!==k.fieldSelector||m[80]!==k.inlineCombinator||m[81]!==k.lockGroupAction||m[82]!==k.lockRuleAction||m[83]!==k.notToggle||m[84]!==k.operatorSelector||m[85]!==k.removeGroupAction||m[86]!==k.removeRuleAction||m[87]!==k.rule||m[88]!==k.ruleGroup||m[89]!==k.ruleGroupBodyElements||m[90]!==k.ruleGroupHeaderElements||m[91]!==k.shiftActions||m[92]!==k.valueEditor||m[93]!==k.valueSelector||m[94]!==k.valueSourceSelector?(c=Object.assign({},D("addGroupAction",k.addGroupAction,w.addGroupAction),D("addRuleAction",k.addRuleAction,w.addRuleAction),D("cloneGroupAction",k.cloneGroupAction,w.cloneGroupAction),D("cloneRuleAction",k.cloneRuleAction,w.cloneRuleAction),D("combinatorSelector",k.combinatorSelector,w.combinatorSelector),D("dragHandle",k.dragHandle,w.dragHandle),D("fieldSelector",k.fieldSelector,w.fieldSelector),D("inlineCombinator",k.inlineCombinator,w.inlineCombinator),D("lockGroupAction",k.lockGroupAction,w.lockGroupAction),D("lockRuleAction",k.lockRuleAction,w.lockRuleAction),D("notToggle",k.notToggle,w.notToggle),D("operatorSelector",k.operatorSelector,w.operatorSelector),D("removeGroupAction",k.removeGroupAction,w.removeGroupAction),D("removeRuleAction",k.removeRuleAction,w.removeRuleAction),D("shiftActions",k.shiftActions,w.shiftActions),{valueEditor:null===k.valueEditor?lZ:k.valueEditor??(null===w.valueEditor?lZ:w.valueEditor)??lJ.valueEditor},D("valueSourceSelector",k.valueSourceSelector,w.valueSourceSelector),D("rule",k.rule,w.rule),D("ruleGroup",k.ruleGroup,w.ruleGroup),D("ruleGroupBodyElements",k.ruleGroupBodyElements,w.ruleGroupBodyElements),D("ruleGroupHeaderElements",k.ruleGroupHeaderElements,w.ruleGroupHeaderElements),{actionElement:k.actionElement??w.actionElement??(l?lJ.actionElement:void 0)},{valueSelector:k.valueSelector??w.valueSelector??(l?lJ.valueSelector:void 0)}),m[47]=w.actionElement,m[48]=w.addGroupAction,m[49]=w.addRuleAction,m[50]=w.cloneGroupAction,m[51]=w.cloneRuleAction,m[52]=w.combinatorSelector,m[53]=w.dragHandle,m[54]=w.fieldSelector,m[55]=w.inlineCombinator,m[56]=w.lockGroupAction,m[57]=w.lockRuleAction,m[58]=w.notToggle,m[59]=w.operatorSelector,m[60]=w.removeGroupAction,m[61]=w.removeRuleAction,m[62]=w.rule,m[63]=w.ruleGroup,m[64]=w.ruleGroupBodyElements,m[65]=w.ruleGroupHeaderElements,m[66]=w.shiftActions,m[67]=w.valueEditor,m[68]=w.valueSelector,m[69]=w.valueSourceSelector,m[70]=l,m[71]=D,m[72]=k.actionElement,m[73]=k.addGroupAction,m[74]=k.addRuleAction,m[75]=k.cloneGroupAction,m[76]=k.cloneRuleAction,m[77]=k.combinatorSelector,m[78]=k.dragHandle,m[79]=k.fieldSelector,m[80]=k.inlineCombinator,m[81]=k.lockGroupAction,m[82]=k.lockRuleAction,m[83]=k.notToggle,m[84]=k.operatorSelector,m[85]=k.removeGroupAction,m[86]=k.removeRuleAction,m[87]=k.rule,m[88]=k.ruleGroup,m[89]=k.ruleGroupBodyElements,m[90]=k.ruleGroupHeaderElements,m[91]=k.shiftActions,m[92]=k.valueEditor,m[93]=k.valueSelector,m[94]=k.valueSourceSelector,m[95]=c):c=m[95],d=c;let S=t.translations??lY,N=v.translations??lY;return N.addGroup?.label,N.addGroup?.title,N.addRule?.label,N.addRule?.title,N.cloneRule?.label,N.cloneRule?.title,N.cloneRuleGroup?.label,N.cloneRuleGroup?.title,N.combinators?.title,N.dragHandle?.label,N.dragHandle?.title,N.fields?.placeholderGroupLabel,N.fields?.placeholderLabel,N.fields?.placeholderName,N.fields?.title,N.lockGroup?.label,N.lockGroup?.title,N.lockGroupDisabled?.label,N.lockGroupDisabled?.title,N.lockRule?.label,N.lockRule?.title,N.lockRuleDisabled?.label,N.lockRuleDisabled?.title,N.notToggle?.label,N.notToggle?.title,N.operators?.placeholderGroupLabel,N.operators?.placeholderLabel,N.operators?.placeholderName,N.operators?.title,N.removeGroup?.label,N.removeGroup?.title,N.removeRule?.label,N.removeRule?.title,N.shiftActionDown?.label,N.shiftActionDown?.title,N.shiftActionUp?.label,N.shiftActionUp?.title,N.value?.title,N.values?.placeholderGroupLabel,N.values?.placeholderLabel,N.values?.placeholderName,N.values?.title,N.valueSourceSelector?.title,S.addGroup?.label,S.addGroup?.title,S.addRule?.label,S.addRule?.title,S.cloneRule?.label,S.cloneRule?.title,S.cloneRuleGroup?.label,S.cloneRuleGroup?.title,S.combinators?.title,S.dragHandle?.label,S.dragHandle?.title,S.fields?.placeholderGroupLabel,S.fields?.placeholderLabel,S.fields?.placeholderName,S.fields?.title,S.lockGroup?.label,S.lockGroup?.title,S.lockGroupDisabled?.label,S.lockGroupDisabled?.title,S.lockRule?.label,S.lockRule?.title,S.lockRuleDisabled?.label,S.lockRuleDisabled?.title,S.notToggle?.label,S.notToggle?.title,S.operators?.placeholderGroupLabel,S.operators?.placeholderLabel,S.operators?.placeholderName,S.operators?.title,S.removeGroup?.label,S.removeGroup?.title,S.removeRule?.label,S.removeRule?.title,S.shiftActionDown?.label,S.shiftActionDown?.title,S.shiftActionUp?.label,S.shiftActionUp?.title,S.value?.title,S.values?.placeholderGroupLabel,S.values?.placeholderLabel,S.values?.placeholderName,S.values?.title,S.valueSourceSelector?.title,m[96]!==N.addGroup?.label||m[97]!==N.addGroup?.title||m[98]!==N.addRule?.label||m[99]!==N.addRule?.title||m[100]!==N.cloneRule?.label||m[101]!==N.cloneRule?.title||m[102]!==N.cloneRuleGroup?.label||m[103]!==N.cloneRuleGroup?.title||m[104]!==N.combinators?.title||m[105]!==N.dragHandle?.label||m[106]!==N.dragHandle?.title||m[107]!==N.fields?.placeholderGroupLabel||m[108]!==N.fields?.placeholderLabel||m[109]!==N.fields?.placeholderName||m[110]!==N.fields?.title||m[111]!==N.lockGroup?.label||m[112]!==N.lockGroup?.title||m[113]!==N.lockGroupDisabled?.label||m[114]!==N.lockGroupDisabled?.title||m[115]!==N.lockRule?.label||m[116]!==N.lockRule?.title||m[117]!==N.lockRuleDisabled?.label||m[118]!==N.lockRuleDisabled?.title||m[119]!==N.notToggle?.label||m[120]!==N.notToggle?.title||m[121]!==N.operators?.placeholderGroupLabel||m[122]!==N.operators?.placeholderLabel||m[123]!==N.operators?.placeholderName||m[124]!==N.operators?.title||m[125]!==N.removeGroup?.label||m[126]!==N.removeGroup?.title||m[127]!==N.removeRule?.label||m[128]!==N.removeRule?.title||m[129]!==N.shiftActionDown?.label||m[130]!==N.shiftActionDown?.title||m[131]!==N.shiftActionUp?.label||m[132]!==N.shiftActionUp?.title||m[133]!==N.value?.title||m[134]!==N.valueSourceSelector?.title||m[135]!==N.values?.placeholderGroupLabel||m[136]!==N.values?.placeholderLabel||m[137]!==N.values?.placeholderName||m[138]!==N.values?.title||m[139]!==l||m[140]!==S.addGroup?.label||m[141]!==S.addGroup?.title||m[142]!==S.addRule?.label||m[143]!==S.addRule?.title||m[144]!==S.cloneRule?.label||m[145]!==S.cloneRule?.title||m[146]!==S.cloneRuleGroup?.label||m[147]!==S.cloneRuleGroup?.title||m[148]!==S.combinators?.title||m[149]!==S.dragHandle?.label||m[150]!==S.dragHandle?.title||m[151]!==S.fields?.placeholderGroupLabel||m[152]!==S.fields?.placeholderLabel||m[153]!==S.fields?.placeholderName||m[154]!==S.fields?.title||m[155]!==S.lockGroup?.label||m[156]!==S.lockGroup?.title||m[157]!==S.lockGroupDisabled?.label||m[158]!==S.lockGroupDisabled?.title||m[159]!==S.lockRule?.label||m[160]!==S.lockRule?.title||m[161]!==S.lockRuleDisabled?.label||m[162]!==S.lockRuleDisabled?.title||m[163]!==S.notToggle?.label||m[164]!==S.notToggle?.title||m[165]!==S.operators?.placeholderGroupLabel||m[166]!==S.operators?.placeholderLabel||m[167]!==S.operators?.placeholderName||m[168]!==S.operators?.title||m[169]!==S.removeGroup?.label||m[170]!==S.removeGroup?.title||m[171]!==S.removeRule?.label||m[172]!==S.removeRule?.title||m[173]!==S.shiftActionDown?.label||m[174]!==S.shiftActionDown?.title||m[175]!==S.shiftActionUp?.label||m[176]!==S.shiftActionUp?.title||m[177]!==S.value?.title||m[178]!==S.valueSourceSelector?.title||m[179]!==S.values?.placeholderGroupLabel||m[180]!==S.values?.placeholderLabel||m[181]!==S.values?.placeholderName||m[182]!==S.values?.title?(h=Object.assign(l?Object.assign({},lK):{},lw("addGroup",{label:[S.addGroup?.label,N.addGroup?.label],title:[S.addGroup?.title,N.addGroup?.title]},l),lw("addRule",{label:[S.addRule?.label,N.addRule?.label],title:[S.addRule?.title,N.addRule?.title]},l),lw("cloneRule",{label:[S.cloneRule?.label,N.cloneRule?.label],title:[S.cloneRule?.title,N.cloneRule?.title]},l),lw("cloneRuleGroup",{label:[S.cloneRuleGroup?.label,N.cloneRuleGroup?.label],title:[S.cloneRuleGroup?.title,N.cloneRuleGroup?.title]},l),lw("combinators",{title:[S.combinators?.title,N.combinators?.title]},l),lw("dragHandle",{label:[S.dragHandle?.label,N.dragHandle?.label],title:[S.dragHandle?.title,N.dragHandle?.title]},l),lw("fields",{placeholderGroupLabel:[S.fields?.placeholderGroupLabel,N.fields?.placeholderGroupLabel],placeholderLabel:[S.fields?.placeholderLabel,N.fields?.placeholderLabel],placeholderName:[S.fields?.placeholderName,N.fields?.placeholderName],title:[S.fields?.title,N.fields?.title]},l),lw("lockGroup",{label:[S.lockGroup?.label,N.lockGroup?.label],title:[S.lockGroup?.title,N.lockGroup?.title]},l),lw("lockGroupDisabled",{label:[S.lockGroupDisabled?.label,N.lockGroupDisabled?.label],title:[S.lockGroupDisabled?.title,N.lockGroupDisabled?.title]},l),lw("lockRule",{label:[S.lockRule?.label,N.lockRule?.label],title:[S.lockRule?.title,N.lockRule?.title]},l),lw("lockRuleDisabled",{label:[S.lockRuleDisabled?.label,N.lockRuleDisabled?.label],title:[S.lockRuleDisabled?.title,N.lockRuleDisabled?.title]},l),lw("notToggle",{label:[S.notToggle?.label,N.notToggle?.label],title:[S.notToggle?.title,N.notToggle?.title]},l),lw("operators",{placeholderGroupLabel:[S.operators?.placeholderGroupLabel,N.operators?.placeholderGroupLabel],placeholderLabel:[S.operators?.placeholderLabel,N.operators?.placeholderLabel],placeholderName:[S.operators?.placeholderName,N.operators?.placeholderName],title:[S.operators?.title,N.operators?.title]},l),lw("values",{placeholderGroupLabel:[S.values?.placeholderGroupLabel,N.values?.placeholderGroupLabel],placeholderLabel:[S.values?.placeholderLabel,N.values?.placeholderLabel],placeholderName:[S.values?.placeholderName,N.values?.placeholderName],title:[S.values?.title,N.values?.title]},l),lw("removeGroup",{label:[S.removeGroup?.label,N.removeGroup?.label],title:[S.removeGroup?.title,N.removeGroup?.title]},l),lw("removeRule",{label:[S.removeRule?.label,N.removeRule?.label],title:[S.removeRule?.title,N.removeRule?.title]},l),lw("shiftActionDown",{label:[S.shiftActionDown?.label,N.shiftActionDown?.label],title:[S.shiftActionDown?.title,N.shiftActionDown?.title]},l),lw("shiftActionUp",{label:[S.shiftActionUp?.label,N.shiftActionUp?.label],title:[S.shiftActionUp?.title,N.shiftActionUp?.title]},l),lw("value",{title:[S.value?.title,N.value?.title]},l),lw("valueSourceSelector",{title:[S.valueSourceSelector?.title,N.valueSourceSelector?.title]},l)),m[96]=N.addGroup?.label,m[97]=N.addGroup?.title,m[98]=N.addRule?.label,m[99]=N.addRule?.title,m[100]=N.cloneRule?.label,m[101]=N.cloneRule?.title,m[102]=N.cloneRuleGroup?.label,m[103]=N.cloneRuleGroup?.title,m[104]=N.combinators?.title,m[105]=N.dragHandle?.label,m[106]=N.dragHandle?.title,m[107]=N.fields?.placeholderGroupLabel,m[108]=N.fields?.placeholderLabel,m[109]=N.fields?.placeholderName,m[110]=N.fields?.title,m[111]=N.lockGroup?.label,m[112]=N.lockGroup?.title,m[113]=N.lockGroupDisabled?.label,m[114]=N.lockGroupDisabled?.title,m[115]=N.lockRule?.label,m[116]=N.lockRule?.title,m[117]=N.lockRuleDisabled?.label,m[118]=N.lockRuleDisabled?.title,m[119]=N.notToggle?.label,m[120]=N.notToggle?.title,m[121]=N.operators?.placeholderGroupLabel,m[122]=N.operators?.placeholderLabel,m[123]=N.operators?.placeholderName,m[124]=N.operators?.title,m[125]=N.removeGroup?.label,m[126]=N.removeGroup?.title,m[127]=N.removeRule?.label,m[128]=N.removeRule?.title,m[129]=N.shiftActionDown?.label,m[130]=N.shiftActionDown?.title,m[131]=N.shiftActionUp?.label,m[132]=N.shiftActionUp?.title,m[133]=N.value?.title,m[134]=N.valueSourceSelector?.title,m[135]=N.values?.placeholderGroupLabel,m[136]=N.values?.placeholderLabel,m[137]=N.values?.placeholderName,m[138]=N.values?.title,m[139]=l,m[140]=S.addGroup?.label,m[141]=S.addGroup?.title,m[142]=S.addRule?.label,m[143]=S.addRule?.title,m[144]=S.cloneRule?.label,m[145]=S.cloneRule?.title,m[146]=S.cloneRuleGroup?.label,m[147]=S.cloneRuleGroup?.title,m[148]=S.combinators?.title,m[149]=S.dragHandle?.label,m[150]=S.dragHandle?.title,m[151]=S.fields?.placeholderGroupLabel,m[152]=S.fields?.placeholderLabel,m[153]=S.fields?.placeholderName,m[154]=S.fields?.title,m[155]=S.lockGroup?.label,m[156]=S.lockGroup?.title,m[157]=S.lockGroupDisabled?.label,m[158]=S.lockGroupDisabled?.title,m[159]=S.lockRule?.label,m[160]=S.lockRule?.title,m[161]=S.lockRuleDisabled?.label,m[162]=S.lockRuleDisabled?.title,m[163]=S.notToggle?.label,m[164]=S.notToggle?.title,m[165]=S.operators?.placeholderGroupLabel,m[166]=S.operators?.placeholderLabel,m[167]=S.operators?.placeholderName,m[168]=S.operators?.title,m[169]=S.removeGroup?.label,m[170]=S.removeGroup?.title,m[171]=S.removeRule?.label,m[172]=S.removeRule?.title,m[173]=S.shiftActionDown?.label,m[174]=S.shiftActionDown?.title,m[175]=S.shiftActionUp?.label,m[176]=S.shiftActionUp?.title,m[177]=S.value?.title,m[178]=S.valueSourceSelector?.title,m[179]=S.values?.placeholderGroupLabel,m[180]=S.values?.placeholderLabel,m[181]=S.values?.placeholderName,m[182]=S.values?.title,m[183]=h):h=m[183],p=h,m[184]!==n||m[185]!==d||m[186]!==G||m[187]!==A||m[188]!==R||m[189]!==t.initialQuery||m[190]!==t.qbId||m[191]!==p?(b={controlClassnames:n,controlElements:d,debugMode:G,enableDragAndDrop:A,enableMountQueryChange:R,translations:p,initialQuery:t.initialQuery,qbId:t.qbId},m[184]=n,m[185]=d,m[186]=G,m[187]=A,m[188]=R,m[189]=t.initialQuery,m[190]=t.qbId,m[191]=p,m[192]=b):b=m[192],b},l0=e=>{let l=(0,o.useRef)({value:e,prev:null}),t=l.current.value;return e!==t&&(l.current={value:e,prev:t}),l.current.prev},l2=e=>{S();let{defaultQuery:l,queryProp:t}=e;l0(!!t)},l3=e=>l=>A.selectors.getQuerySelectorById({queries:l.queries},e),l4=(0,r.jO)($),l6=(e,l)=>{let t=o.useContext(u);return l4(e,l)??t?.initialQuery},l5={},l7={},l8=[],l9={},te=()=>null,tl=()=>"",tt=()=>!0,to=function(){console.log(...arguments)},ta=(e,l,t)=>{let o=er(e);if("between"===l.operator||"notBetween"===l.operator){let e=[o,o];return t?e:I(e.map(e=>e??""),",")}return o},tr=e=>{let[l]=(0,o.useState)(lc),{fields:t,baseField:a,operators:r,baseOperator:n,combinators:i=b,baseCombinator:s,translations:u,enableMountQueryChange:d=!0,controlClassnames:c,controlElements:p,getDefaultField:m,getDefaultOperator:f,getDefaultValue:v,getOperators:g,getValueEditorType:G,getValueSources:y,getInputType:R,getValues:$,autoSelectField:A=!0,autoSelectOperator:w=!0,autoSelectValue:k=!0,addRuleToNewGroups:D=!1,enableDragAndDrop:S,listsAsArrays:N=!1,debugMode:C=!1,idGenerator:x=lc}=e,j=r??h,[L]=(0,o.useState)(e.query??e.defaultQuery),E=l1({controlClassnames:c,controlElements:p,debugMode:C,enableDragAndDrop:S,enableMountQueryChange:d,translations:u,initialQuery:L,qbId:l,finalize:!0}),{translations:M}=E,O=(0,o.useMemo)(()=>({id:M.fields.placeholderName,name:M.fields.placeholderName,value:M.fields.placeholderName,label:M.fields.placeholderLabel}),[M.fields.placeholderLabel,M.fields.placeholderName]),T=(0,o.useMemo)(()=>t??[O],[O,t]),I=(0,o.useMemo)(()=>{let e=Array.isArray(T)?X(T,a):l$(Y(T,a)).map(e=>({...T[e],name:e,value:e})).sort((e,l)=>e.label.localeCompare(l.label));return eo(e)?A?en(e):en([{label:M.fields.placeholderGroupLabel,options:[O]},...e]):A?ee(e):ee([O,...e])},[A,a,O,T,M.fields.placeholderGroupLabel]),q=(0,o.useMemo)(()=>{if(!Array.isArray(T)){let e=Y(T,a);return A?e:{...e,[M.fields.placeholderName]:O}}let e={};if(eo(I))for(let l of I)for(let t of l.options)e[t.value??t.name]=Z(t,a);else for(let l of I)e[l.value??l.name]=Z(l,a);return e},[A,a,O,I,T,M.fields.placeholderName]),H=(0,o.useMemo)(()=>X(i,s),[s,i]),U=(0,o.useMemo)(()=>({id:M.operators.placeholderName,name:M.operators.placeholderName,value:M.operators.placeholderName,label:M.operators.placeholderLabel}),[M.operators.placeholderLabel,M.operators.placeholderName]),B=(0,o.useCallback)((e,l)=>{let{fieldData:t}=l,o=X(j,n);if(t?.operators)o=X(t.operators,n);else if(g){let l=g(e,{fieldData:t});l&&(o=X(l,n))}return w||(o=eo(o)?[{label:M.operators.placeholderGroupLabel,options:[U]},...o]:[U,...o]),ei(o)},[w,n,U,g,j,M.operators.placeholderGroupLabel]),Q=(0,o.useCallback)(e=>{let l=q[e];return l?.defaultOperator?l.defaultOperator:f?"function"==typeof f?f(e,{fieldData:l}):f:er(B(e,{fieldData:l})??[])??""},[q,f,B]),W=(0,o.useCallback)((e,l,t)=>{let{fieldData:o}=t;return o.valueEditorType?"function"==typeof o.valueEditorType?o.valueEditorType(l):o.valueEditorType:G?.(e,l,{fieldData:o})??"text"},[G]),P=(0,o.useCallback)((e,l)=>lG(q[e],l,y),[q,y]),F=(0,o.useMemo)(()=>({id:M.values.placeholderName,name:M.values.placeholderName,value:M.values.placeholderName,label:M.values.placeholderLabel}),[M.values.placeholderLabel,M.values.placeholderName]),V=(0,o.useCallback)((e,l,t)=>{let{fieldData:o}=t,a=[];return o?.values&&(a=X(o.values)),$&&(a=X($(e,l,{fieldData:o}))),k||(a=eo(a)?[{label:M.values.placeholderGroupLabel,options:[F]},...a]:[F,...a]),a},[k,F,$,M.values.placeholderGroupLabel]),_=(0,o.useCallback)(e=>{let l=q[e.field]??{};if(l?.defaultValue!==void 0&&null!==l.defaultValue)return l.defaultValue;if(v)return v(e,{fieldData:l});let t="",o=V(e.field,e.operator,{fieldData:l});if("field"===e.valueSource){let o=eu(l,I,e.operator);t=o.length>0?ta(o,e,N):""}else if(o.length>0){let a=W(e.field,e.operator,{fieldData:l});"multiselect"===a?t=N?[]:"":("select"===a||"radio"===a)&&(t=ta(o,e,N))}else"checkbox"===W(e.field,e.operator,{fieldData:l})&&(t=!1);return t},[q,I,v,W,V,N]),z=(0,o.useCallback)((e,l,t)=>{let{fieldData:o}=t;if(R){let t=R(e,l,{fieldData:o});if(t)return t}return"text"},[R]),K=(0,o.useCallback)(()=>{let e="";if(I?.length>0&&I[0]){let l=er(I);l&&(e=l)}if(m)if("function"==typeof m){let l=m(I);l&&(e=l)}else e=m;let l=Q(e),t=P(e,l)[0]??"value",o={id:x(),field:e,operator:l,valueSource:t,value:""},a=_(o);return{...o,value:a}},[I,m,Q,_,P,x]),J=(0,o.useCallback)(e=>e?{id:x(),rules:D?[K()]:[],not:!1}:{id:x(),rules:D?[K()]:[],combinator:er(H)??"",not:!1},[D,H,K,x]);return{qbId:l,rqbContext:E,fields:I,fieldMap:q,combinators:H,getOperatorsMain:B,getRuleDefaultOperator:Q,getValueEditorTypeMain:W,getValueSourcesMain:P,getValuesMain:V,getRuleDefaultValue:_,getInputTypeMain:z,createRule:K,createRuleGroup:J}},tn=e=>(function(e,l){var t;let{query:a,defaultQuery:r,getValueEditorSeparator:n=te,getRuleClassname:i=tl,getRuleGroupClassname:s=tl,onAddRule:u=tt,onAddGroup:d=tt,onMoveRule:c=tt,onMoveGroup:p=tt,onGroupRule:h=tt,onGroupGroup:b=tt,onRemove:f=tt,onQueryChange:v,showCombinatorsBetweenRules:G=!1,showNotToggle:R=!1,showShiftActions:$=!1,showCloneButtons:A=!1,showLockButtons:w=!1,suppressStandardClassnames:k=!1,resetOnFieldChange:C=!0,resetOnOperatorChange:x=!1,autoSelectField:j=!0,autoSelectOperator:L=!0,autoSelectValue:E=!0,addRuleToNewGroups:M=!1,listsAsArrays:O=!1,parseNumbers:T=!1,disabled:I=!1,validator:q,onLog:H=to,idGenerator:U,accessibleDescriptionGenerator:B=lu}=e,{qbId:Q,rqbContext:P,fields:V,fieldMap:_,combinators:z,getOperatorsMain:K,getRuleDefaultOperator:J,getValueEditorTypeMain:Z,getValueSourcesMain:X,getValuesMain:Y,getRuleDefaultValue:ee,getInputTypeMain:el,createRule:et,createRuleGroup:eo}=l,{controlClassnames:ea,controlElements:er,debugMode:en,enableDragAndDrop:ei,enableMountQueryChange:es,translations:eu}=P,ed=!!G,ec=!!R,ep=!!$,eh=!!A,eb=!!w,em=!!C,ef=!!x,ev=!!j,eg=!!L,eG=!!E,ey=!!M,eR=!!O,e$=!!k,eA=(0,o.useCallback)(function(){en&&H(...arguments)},[en,H]);l2({defaultQuery:r,queryProp:a});let ew=N(),ek=S(),eD=(0,o.useMemo)(()=>l3(Q),[Q]),eS=l6(eD),eN=(0,o.useCallback)(()=>eD(ew.getState()),[ew,eD]),eC=(0,o.useMemo)(()=>eo(),[eo]),ex=a??eS??r??eC,ej=ex.id?ex:lD(ex,{idGenerator:U}),[eL]=(0,o.useState)(ej),eE=(0,o.useMemo)(()=>({...P,initialQuery:eL}),[P,eL]);(0,o.useEffect)(()=>{a&&!Object.is(a,eS)&&ek(D({payload:{qbId:Q,query:a},onQueryChange:void 0}))},[a,Q,eS,ek]);let eM=(0,o.useMemo)(()=>F(ej),[ej]),eO=!!e.independentCombinators&&!eM;eO||eO||e.independentCombinators,S();let eT=(0,o.useRef)(!1);(0,o.useEffect)(()=>{eT.current||(eT.current=!0,ek(D({payload:{qbId:Q,query:ej},onQueryChange:es&&"function"==typeof v?v:void 0})))},[es,v,Q,ek,ej]);let eI=(0,o.useCallback)(e=>{ek(D({payload:{qbId:Q,query:e},onQueryChange:v}))},[v,Q,ek]),eq=(0,o.useMemo)(()=>Array.isArray(I)&&I||l8,[I]),eH=!0===I,eU=(0,o.useMemo)(()=>ej.disabled||eq.some(e=>0===e.length),[eq,ej.disabled]),eB=(0,o.useCallback)((e,l,t)=>{let o=l3(Q)(ew.getState());if(!o)return;if(ls(l,o)||eH)return void eA({qbId:Q,type:g.parentPathDisabled,rule:e,parentPath:l,query:o});let a=u(e,l,o,t);if(!a)return void eA({qbId:Q,type:g.onAddRuleFalse,rule:e,parentPath:l,query:o});let r=!0===a?e:a,n=lx(o,r,l,{combinators:z,combinatorPreceding:r.combinatorPreceding??void 0,idGenerator:U});eA({qbId:Q,type:g.add,query:o,newQuery:n,newRule:r,parentPath:l}),eI(n)},[Q,ew,eH,u,z,U,eA,eI]),eQ=(0,o.useCallback)((e,l,t)=>{let o=l3(Q)(ew.getState());if(!o)return;if(ls(l,o)||eH)return void eA({qbId:Q,type:g.parentPathDisabled,ruleGroup:e,parentPath:l,query:o});let a=d(e,l,o,t);if(!a)return void eA({qbId:Q,type:g.onAddGroupFalse,ruleGroup:e,parentPath:l,query:o});let r=!0===a?e:a,n=lx(o,r,l,{combinators:z,combinatorPreceding:r.combinatorPreceding??void 0,idGenerator:U});eA({qbId:Q,type:g.add,query:o,newQuery:n,newGroup:r,parentPath:l}),eI(n)},[Q,ew,eH,d,z,U,eA,eI]),eW=(0,o.useCallback)((e,l,t)=>{let o=l3(Q)(ew.getState());if(!o)return;if(ls(t,o)&&"disabled"!==e||eH)return void eA({qbId:Q,type:g.pathDisabled,path:t,prop:e,value:l,query:o});let a=lj(o,e,l,t,{resetOnFieldChange:em,resetOnOperatorChange:ef,getRuleDefaultOperator:J,getValueSources:X,getRuleDefaultValue:ee});eA({qbId:Q,type:g.update,query:o,newQuery:a,prop:e,value:l,path:t}),eI(a)},[Q,ew,eH,em,ef,J,X,ee,eA,eI]),eP=(0,o.useCallback)((e,l)=>{let t=l3(Q)(ew.getState());if(!t)return;if(ls(e,t)||eH)return void eA({qbId:Q,type:g.pathDisabled,path:e,query:t});let o=lt(e,t);if(o)if(f(o,e,t,l)){let l=lL(t,e);eA({qbId:Q,type:g.remove,query:t,newQuery:l,path:e,ruleOrGroup:o}),eI(l)}else eA({qbId:Q,type:g.onRemoveFalse,ruleOrGroup:o,path:e,query:t})},[Q,ew,eH,eA,f,eI]),eF=(0,o.useCallback)((e,l,t,o)=>{let a=l3(Q)(ew.getState());if(!a)return;if(ls(e,a)||eH)return void eA({qbId:Q,type:g.pathDisabled,oldPath:e,newPath:l,query:a});let r=lM(a,e,l,{clone:t,combinators:z,idGenerator:U}),n=lt(e,a),i=W(n),s=(i?p:c)(n,e,l,a,r,{clone:t,combinators:z},o);if(!s)return void eA({qbId:Q,type:i?g.onMoveGroupFalse:g.onMoveRuleFalse,ruleOrGroup:n,oldPath:e,newPath:l,clone:t,query:a,nextQuery:r});let u=W(s)?s:r;eA({qbId:Q,type:g.move,query:a,newQuery:u,oldPath:e,newPath:l,clone:t}),eI(u)},[Q,ew,eH,z,U,p,c,eA,eI]),eV=(0,o.useCallback)((e,l,t,o)=>{let a=l3(Q)(ew.getState());if(!a)return;if(ls(e,a)||eH)return void eA({qbId:Q,type:g.pathDisabled,sourcePath:e,targetPath:l,query:a});let r=lO(a,e,l,{clone:t,combinators:z,idGenerator:U}),n=lt(e,a),i=W(n),s=(i?b:h)(n,e,l,a,r,{clone:t,combinators:z},o);if(!s)return void eA({qbId:Q,type:i?g.onGroupGroupFalse:g.onGroupRuleFalse,ruleOrGroup:n,sourcePath:e,targetPath:l,clone:t,query:a,nextQuery:r});let u=W(s)?s:r;eA({qbId:Q,type:g.group,query:a,newQuery:u,sourcePath:e,targetPath:l,clone:t}),eI(u)},[Q,ew,eH,z,U,b,h,eA,eI]),{validationResult:e_,validationMap:ez}=(0,o.useMemo)(()=>{let e="function"==typeof q&&ej?q(ej):l5;return{validationResult:e,validationMap:"boolean"==typeof e?l7:e}},[ej,q]),eK=(0,o.useMemo)(()=>ei?"enabled":"disabled",[ei]),eJ=(0,o.useMemo)(()=>eM||ed?"enabled":"disabled",[eM,ed]),eZ=(0,o.useMemo)(()=>"string"==typeof ej.combinator?{combinator:ej.combinator}:l9,[ej.combinator]),eX=(0,o.useMemo)(()=>y(e$||m.queryBuilder,y(ea.queryBuilder),eH&&ea.disabled,"boolean"==typeof e_&&e_&&ea.valid,"boolean"==typeof e_&&!e_&&ea.invalid,e$||{[m.disabled]:eH,[m.valid]:"boolean"==typeof e_&&e_,[m.invalid]:"boolean"==typeof e_&&!e_}),[ea.disabled,ea.invalid,ea.queryBuilder,ea.valid,eH,e$,e_]),eY=(0,o.useMemo)(()=>({addRuleToNewGroups:ey,accessibleDescriptionGenerator:B,autoSelectField:ev,autoSelectOperator:eg,autoSelectValue:eG,classNames:ea,combinators:z,controls:er,createRule:et,createRuleGroup:eo,disabledPaths:eq,enableDragAndDrop:ei,fieldMap:_,fields:V,dispatchQuery:eI,getQuery:eN,getInputType:el,getOperators:K,getRuleClassname:i,getRuleGroupClassname:s,getValueEditorSeparator:n,getValueEditorType:Z,getValues:Y,getValueSources:X,independentCombinators:eM,listsAsArrays:eR,parseNumbers:T,qbId:Q,showCloneButtons:eh,showCombinatorsBetweenRules:ed,showLockButtons:eb,showNotToggle:ec,showShiftActions:ep,suppressStandardClassnames:e$,validationMap:ez}),[B,ey,ev,eg,eG,z,ea,er,et,eo,eq,eI,ei,_,V,el,K,eN,i,s,n,Z,Y,X,eM,eR,T,Q,eh,ed,eb,ec,ep,e$,ez]);return{actions:(0,o.useMemo)(()=>({moveRule:eF,onGroupAdd:eQ,onGroupRemove:eP,onPropChange:eW,onRuleAdd:eB,onRuleRemove:eP,groupRule:eV}),[eV,eF,eQ,eW,eB,eP]),rootGroup:ej,rootGroupDisabled:eU,queryDisabled:eH,rqbContext:eE,schema:eY,translations:eu,wrapperClassName:eX,dndEnabledAttr:eK,inlineCombinatorsAttr:eJ,combinatorPropObject:eZ}})(e,tr(e)),ti=e=>{let l,t=M(15),{props:o}=e,r=tn(o),n=r.schema.controls.ruleGroup,i=!!r.rootGroup.not;return t[0]!==n||t[1]!==o.context||t[2]!==r.actions||t[3]!==r.combinatorPropObject||t[4]!==r.dndEnabledAttr||t[5]!==r.inlineCombinatorsAttr||t[6]!==r.queryDisabled||t[7]!==r.rootGroup||t[8]!==r.rootGroupDisabled||t[9]!==r.rqbContext||t[10]!==r.schema||t[11]!==r.translations||t[12]!==r.wrapperClassName||t[13]!==i?(l=(0,a.jsx)(u.Provider,{value:r.rqbContext,children:(0,a.jsx)("div",{role:"form",className:r.wrapperClassName,"data-dnd":r.dndEnabledAttr,"data-inlinecombinators":r.inlineCombinatorsAttr,children:(0,a.jsx)(n,{translations:r.translations,ruleGroup:r.rootGroup,rules:r.rootGroup.rules,...r.combinatorPropObject,not:i,schema:r.schema,actions:r.actions,id:r.rootGroup.id,path:G,disabled:r.rootGroupDisabled,shiftUpDisabled:!0,shiftDownDisabled:!0,parentDisabled:r.queryDisabled,context:o.context})})},r.dndEnabledAttr),t[0]=n,t[1]=o.context,t[2]=r.actions,t[3]=r.combinatorPropObject,t[4]=r.dndEnabledAttr,t[5]=r.inlineCombinatorsAttr,t[6]=r.queryDisabled,t[7]=r.rootGroup,t[8]=r.rootGroupDisabled,t[9]=r.rqbContext,t[10]=r.schema,t[11]=r.translations,t[12]=r.wrapperClassName,t[13]=i,t[14]=l):l=t[14],l}}}]);