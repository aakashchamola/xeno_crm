(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{1249:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(4232),n=a(9099),l=a(6984);function c(e){let{children:t}=e,a=(0,n.useRouter)();return(0,r.useEffect)(()=>{!function(){let e=localStorage.getItem("jwt");if(!e)return null;try{let t=(0,l.s)(e);if(t.exp&&Date.now()/1e3>t.exp)return localStorage.removeItem("jwt"),localStorage.removeItem("user"),null;return t}catch(e){return null}}()&&(localStorage.removeItem("jwt"),localStorage.removeItem("user"),a.replace("/"))},[a]),t}},2892:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(7876),n=a(4232),l=a(1040),c=a(9161),i=a(1249);function s(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(""),[o,u]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{u(!0);try{let e=localStorage.getItem("jwt"),a=await l.A.get("".concat("http://localhost:3002","/campaigns"),{headers:{Authorization:"Bearer ".concat(e)}});t((a.data||[]).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),s("")}catch(e){s("Failed to fetch campaigns")}u(!1)})()},[]),(0,r.jsx)(c.A,{children:(0,r.jsx)(i.A,{children:(0,r.jsxs)("section",{"aria-label":"Campaign History",children:[(0,r.jsx)("h2",{tabIndex:0,children:"Campaign History"}),o&&(0,r.jsx)("div",{role:"status",children:"Loading..."}),a&&(0,r.jsx)("div",{role:"alert",children:a}),(0,r.jsx)("ul",{children:e.map(e=>{var t,a,n;return(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"/campaigns/".concat(e.id),style:{textDecoration:"underline",color:"#0070f3"},children:(0,r.jsx)("b",{children:e.name})})," — Status: ",e.status," — Audience: ",null!=(t=e.audienceSize)?t:"N/A"," — Sent: ",null!=(a=e.sent)?a:"N/A"," — Failed: ",null!=(n=e.failed)?n:"N/A"]},e.id)})}),!o&&!e.length&&!a&&(0,r.jsx)("div",{children:"No campaigns found."})]})})})}},8996:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/campaignHistory",function(){return a(2892)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[719,636,593,792],()=>t(8996)),_N_E=e.O()}]);